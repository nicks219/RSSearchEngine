-- MySQL dump 10.13  Distrib 5.7.38, for Linux (x86_64)
--
-- Host: localhost    Database: tagit
-- ------------------------------------------------------
-- Server version	5.7.38

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `Genre`
--

DROP TABLE IF EXISTS `Genre`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Genre` (
  `GenreID` int(11) NOT NULL AUTO_INCREMENT,
  `Genre` varchar(30) NOT NULL,
  PRIMARY KEY (`GenreID`),
  UNIQUE KEY `AK_Genre_Genre` (`Genre`)
) ENGINE=InnoDB AUTO_INCREMENT=44 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Genre`
--

LOCK TABLES `Genre` WRITE;
/*!40000 ALTER TABLE `Genre` DISABLE KEYS */;
INSERT INTO `Genre` VALUES (24,'.NET'),(34,'BASH'),(1,'Build Tasks'),(29,'CMD'),(23,'Configuration'),(2,'Confluence'),(43,'DB'),(3,'Docs'),(4,'Duty'),(5,'Etcd'),(20,'Excellenters'),(6,'Gitlab'),(18,'gRpc'),(36,'HABR'),(35,'HOTFIX'),(21,'Incidents'),(33,'ITSEC'),(7,'K8s'),(8,'Kafka'),(41,'KCT'),(10,'LE'),(9,'Learning'),(19,'Magic'),(11,'Memcached'),(40,'MESH'),(12,'MR'),(22,'My'),(38,'OVERLOAD'),(28,'OZON'),(27,'PLTFRM'),(13,'Postgre'),(42,'PROTO'),(14,'Redis'),(39,'RTC'),(15,'S2S'),(32,'SHARPLAB'),(26,'THANOS'),(16,'Ticket'),(37,'TOOLING'),(31,'TRACING'),(25,'Updates'),(30,'VAULT'),(17,'Warden');
/*!40000 ALTER TABLE `Genre` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `GenreText`
--

DROP TABLE IF EXISTS `GenreText`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `GenreText` (
  `GenreID` int(11) NOT NULL,
  `TextID` int(11) NOT NULL,
  PRIMARY KEY (`GenreID`,`TextID`),
  KEY `IX_GenreText_TextID` (`TextID`),
  CONSTRAINT `FK_GenreText_Genre_GenreID` FOREIGN KEY (`GenreID`) REFERENCES `Genre` (`GenreID`) ON DELETE CASCADE,
  CONSTRAINT `FK_GenreText_Text_TextID` FOREIGN KEY (`TextID`) REFERENCES `Text` (`TextID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `GenreText`
--

LOCK TABLES `GenreText` WRITE;
/*!40000 ALTER TABLE `GenreText` DISABLE KEYS */;
INSERT INTO `GenreText` VALUES (2,1),(6,1),(1,2),(16,3),(22,3),(16,4),(22,4),(16,5),(22,5),(16,6),(22,6),(21,7),(1,8),(3,9),(4,9),(3,10),(30,10),(15,11),(1,12),(4,12),(3,13),(3,14),(22,14),(3,15),(10,15),(3,16),(4,16),(8,16),(1,17),(16,18),(22,18),(4,19),(4,20),(10,20),(4,21),(3,22),(4,22),(13,22),(1,23),(3,23),(3,24),(3,25),(3,26),(28,26),(26,27),(3,28),(15,28),(3,29),(14,29),(27,29),(3,30),(14,30),(3,31),(28,32),(7,33),(29,33),(6,34),(4,35),(30,35),(4,36),(4,37),(3,38),(22,38),(6,39),(16,39),(22,39),(4,40),(31,40),(7,41),(29,41),(4,42),(4,43),(4,44),(13,44),(4,45),(8,45),(29,46),(27,47),(27,48),(27,49),(1,50),(4,50),(4,51),(4,52),(22,52),(1,53),(3,53),(4,53),(4,54),(6,55),(13,56),(17,56),(4,57),(14,57),(4,58),(15,58),(1,59),(4,59),(20,59),(4,60),(15,60),(6,61),(20,61),(22,61),(4,62),(19,62),(4,63),(13,63),(4,64),(19,64),(4,65),(15,65),(4,66),(1,67),(4,67),(1,68),(4,68),(4,69),(20,69),(4,70),(4,71),(20,71),(4,72),(15,72),(20,72),(4,73),(20,73),(6,74),(4,75),(28,76),(4,77),(19,77),(16,78),(6,79),(32,80),(4,81),(17,81),(4,82),(4,83),(15,83),(4,84),(13,84),(4,85),(14,85),(4,86),(14,86),(16,86),(4,87),(8,87),(4,88),(19,88),(4,89),(20,89),(4,90),(13,90),(30,90),(2,91),(30,91),(2,92),(3,93),(4,94),(19,94),(4,95),(6,95),(4,96),(8,96),(3,97),(4,97),(13,97),(4,98),(1,99),(4,99),(4,100),(4,101),(20,101),(4,102),(6,103),(4,104),(13,104),(4,105),(19,105),(14,106),(34,107),(34,108),(4,109),(15,109),(19,109),(4,110),(4,111),(19,111),(4,112),(4,113),(4,114),(35,114),(28,115),(4,116),(36,117),(4,118),(4,119),(28,120),(37,121),(29,122),(4,123),(4,124),(4,125),(4,126),(15,127),(18,127),(6,128),(1,129),(4,129),(19,129),(1,130),(4,130),(4,131),(38,131),(4,132),(4,133),(39,133),(4,134),(39,134),(4,135),(4,136),(4,137),(4,138),(15,138),(19,138),(4,139),(38,139),(4,140),(20,140),(4,141),(40,141),(4,142),(39,142),(24,143),(4,144),(13,144),(4,145),(39,145),(1,146),(4,146),(4,147),(19,147),(41,147),(4,148),(4,149),(39,149),(4,150),(39,150),(4,151),(6,151),(13,151),(4,152),(42,152),(4,153),(15,153),(4,154),(7,154),(28,155),(43,155),(4,156),(30,156),(3,157),(4,157),(4,158),(30,158),(4,159),(39,159),(4,160),(4,161),(3,162),(4,162),(6,162),(3,163),(3,164),(4,165),(4,166),(4,167),(4,168),(4,169);
/*!40000 ALTER TABLE `GenreText` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Text`
--

DROP TABLE IF EXISTS `Text`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Text` (
  `TextID` int(11) NOT NULL AUTO_INCREMENT,
  `Title` varchar(50) NOT NULL,
  `Song` varchar(4000) DEFAULT NULL,
  PRIMARY KEY (`TextID`),
  UNIQUE KEY `AK_Text_Title` (`Title`)
) ENGINE=InnoDB AUTO_INCREMENT=170 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Text`
--

LOCK TABLES `Text` WRITE;
/*!40000 ALTER TABLE `Text` DISABLE KEYS */;
INSERT INTO `Text` VALUES (1,'[DOCS] Common pipeline','1. Почитать про наш ci/cd:\nhttps://confluence.ozon.ru/pages/viewpage.action?spaceKey=ITDOC&title=Common+pipeline+0.0.5+jobs#Commonpipeline0.0.5jobs-docCloseReleasecloserelease\n\n2. Проба тэга: @conf\n\n3. Новое в гитлабе, хабр 2020:\nhttps://habr.com/ru/company/flant/blog/491888/'),(2,'[DOCS] grpc tools','1. Пакеты в артифактори  с нашим тулом:\n\nhttps://artifactory.s.o3.ru/ui/packages?name=Ozon.Platform.Tools&type=packages'),(3,'[DOTNET-1078] Ошибка в тестах в ci/cd','@review\n\n1. тикет:\nhttps://jit.ozon.ru/browse/DOTNET-1078?workflowName=Ozon+Development+Flow&stepId=2\n\n2. мр:\nhttps://gitlab.ozon.ru/platform/dotnet/platform/-/merge_requests/449\n\n3. обсуждение и решение проблемы:\nhttps://stackoverflow.com/questions/43469400/asp-net-core-the-configured-user-limit-128-on-the-number-of-inotify-instance\n\nпроявляется в linux в виде исчерпания лимита file watchers, которые неявно включаются для appsettings.json внутри метода CreateDefaultBuilder()'),(4,'[DOTNET-1070] Локальное падение pg тестов (2)','@review\n\n1. тикет\nhttps://jit.ozon.ru/browse/DOTNET-1070?workflowName=Ozon+Development+Flow&stepId=2\n\n2. мр\nhttps://gitlab.ozon.ru/platform/dotnet/platform/-/merge_requests/448\n\nтесты Sharding и мои PgEf пользуются одним PostgresContainerFixture (локальный запуск контейнера Pg в докере), из-за чего дублируются имена контейнеров, что приводит к исключению'),(5,'[DOTNET-1074 epic] релиз мимира','@ review\n\n1. тикеты\nhttps://jit.ozon.ru/browse/DOTNET-1059?atlOrigin=eyJpIjoiYjM0MTA4MzUyYTYxNDVkY2IwMzVjOGQ3ZWQ3NzMwM2QiLCJwIjoianN3LWdpdGxhYlNNLWludCJ9\n\nhttps://jit.ozon.ru/browse/DOTNET-1060?atlOrigin=eyJpIjoiYjM0MTA4MzUyYTYxNDVkY2IwMzVjOGQ3ZWQ3NzMwM2QiLCJwIjoianN3LWdpdGxhYlNNLWludCJ9\n\nhttps://jit.ozon.ru/browse/DOTNET-1074\n\n2. мр\'ы\nhttps://gitlab.ozon.ru/platform/dotnet/demo-services/-/merge_requests/71\n\nhttps://gitlab.ozon.ru/platform/dotnet/platform/-/merge_requests/438\n\nвеселая история с релизом мимира..'),(6,'[DOTNET-929] querry для overload','@inprogress\n\n1. тикет [DOTNET-929]\nhttps://jit.ozon.ru/browse/DOTNET-929?workflowName=Ozon+Development+Flow&stepId=2\n\n2. сам overload:\nhttps://overload.o3.ru/ammo-collector\n\n'),(7,'[GRAFANA] 20 самых медленных сборок','1. графана с лидерами:\nhttp://grafana.o3.ru/d/cBrpKFq7z/build-jobs-duration-net-and-go?orgId=1&from=now-6M&to=now&viewPanel=4\n\n2. тредиик в мм:\nhttps://msg.o3.ru/ozon/pl/9k13nbgpx3bxdr8568uqh14yoy\n\n@долгий билд сборок'),(8,'[BUILDTASKS] ошибки дублирования типов','1. при ошибках генерации с дублированием типов надо отключить вотч на файлы при компиляции:\n\nпример из проекта build-tasks:\n<ItemGroup>\n<!-- после изменения стуктуры obj/protos надо отключить компиляцию -->\n        <Compile Include=\"$(MSBuildProjectDirectory)\\obj\\protos\\**\\*.cs\" />\n</ItemGroup>\n\n@ошибки дублирования типов\n'),(9,'[DUTY] вопрос по линтеру','@линтер @комитет\n\n1. тред в мм:\nhttps://msg.o3.ru/ozon/pl/es9fb3u8ifgfdch3ydhec8466a\n\nтам есть ссылка на соглашение по коду из committee:\nhttps://committee.o3.ru/#/conventions/dotnet/convention?id=%D0%9E-%D1%81%D1%82%D0%B8%D0%BB%D0%B5-%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D1%8F-%D0%BA%D0%BE%D0%B4%D0%B0'),(10,'[VAULT] запуск волта','@vault @волт\n\nset VAULT_ADDR=https://vault.s.o3.ru:8200&&^\nvault login -method oidc'),(11,'[HERE] Толя про s2s и обновление платформы','@here \nИ снова платформа!\n\nМногие из ваших команд должны были получить тикет на обновление платформы до последней версии: 6.2.2\nВот общий эпик для них https://jit.ozon.ru/browse/PLTFRM-2785\n\nНемного подробностей про настройки и процесс внедрения s2s автризации.\n\nДокументация по процессу переезда тут https://confluence.ozon.ru/pages/viewpage.action?pageId=227007340 \n\nПравильная конфигурация stg и prod - дефолтная. Переменные окружения и креды там уже настроены. После обновления ничего править на стендах не надо.\nВсе конфигурации работают на существующих платформенных провайдерах которые читают JSON, ETCD и Vault.\nОшибки вида `Error while acquiring token to access service {service-name}` говорят о том, что вам не выдано прав для работы с сервисом.\nВ дефолтном режиме TrySign - это просто предупреждение, чтобы вы знали к каким сервисам вам надо получить права.\n\nДля всех других вариантов запуска конфигурацию подбирайте исходя из ваших потребностей.\nТут все варианты https://gitlab.ozon.ru/platform/dotnet/platform/-/blob/master/docs/s2s-authorization.md\nДля dev можете, выключить проверки в ETCD или добавить фейковый S2S_AUTH_URL или настроить все креды на stg.\nДля локальных тестов с тестовым хостом можете выключить проверку токена в UsePlatform.\nДля локального запуска - все варианты хороши.\n \nЧеклист:\n* Не забудьте проверить, что не выключили ETCD или Vault.\n* смотрите метрики (Дешбор в Grafana - s2s auth: overview)\n* требуйте выдачи прав в сервисах к которым ходите\n* выдавайте права тем сервисам, которые ходят к вам\n* ждите когда команда по внедрению s2s автризации переключит вам конфиги на stg и prod '),(12,'[DUTY] не работает вендоринг','не работает вендоринг\nhttps://msg.o3.ru/ozon/pl/49rrkptk3ift7j3cmtak3g63kc\n\nBuild FAILED\n\n@platform_dotnet_duty перестал работать вендоринг на винде. При этом вчера всё было ок. Локально ветка та же самая, что и вчера, так что изменений кода точно не делал\n\nJetBrainsLog.ReSharperBuild_2022_06_29_07_22_38_7100.log\nLOG146KB\n10:28 AM\nПохоже, что нет доступа к \n\nimport \"google/api/annotations.proto\";\n10:29 AM\nВременно закомментировал локально, но хотелось бы понять причину\n\nStanislav Kovalev\n10:30 AM\nпопробуй без впн :pekaface: \n\nAleksey Sakharov\n10:33 AM\n\nа ты хорош  :pekaface:  '),(13,'[DOCS] телефоны команды','@телефоны\n\nСаша: +7 (996) 624-39-25\nЛеша: +7 (922) 622-15-68'),(14,'[MR] локальный jaeger','@трейсы @jaeger @localjaeger\n\n1. МР на доки по кастомным трейсам:\nhttps://gitlab.ozon.ru/platform/dotnet/platform/-/merge_requests/420\n\n2. настройки джагера:\n\ndocker run --rm --detach \\\n--name \"jaeger\" \\\n--publish 6831:6831/udp \\\n--publish 16686:16686 \\\njaegertracing/all-in-one \n\nдобавить секцию Jaeger в appsettings.json:\n\"Jaeger\": {\n    \"ServiceName\": \"Beta\",\n    \"AgentHost\": \"localhost\",\n    \"AgentPort\": \"6831\",\n    \"SamplerType\": \"const\",\n    \"SamplerParam\": \"1\"\n  }\n'),(15,'[BC] etcd hosts','@etcd @bc\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/5nm79zx6epdqfj55yzxmjz5www\n\n2. а куда делать переменная hosts?\n\n leaderElectionOptions.Hosts =\n                $\"https://etcdcommon1-{LocalEnvironment}.s.o3.ru:2379,\" +\n                $\"https://etcdcommon2-{LocalEnvironment}.s.o3.ru:2379,\" +\n                $\"https://etcdcommon3-{LocalEnvironment}.s.o3.ru:2379\";\n\nОна уехала на регистрацию ETCD\n\n.UsePlatformData(options => options.Etcd.Hosts = );\n'),(16,'[DUTY] kafka','@kafka @29.06.2022 @сроки по кафке\n\n1. вопрос по срокам на кафку в ММ:\nhttps://msg.o3.ru/ozon/pl/1scksckykjycfyxbgcspiycoic\n\n2. дока:\nhttps://gitlab.ozon.ru/platform/dotnet/platform/-/blob/master/docs/data/kafka.md\n\n3. тикет:\nhttps://jit.ozon.ru/browse/DOTNET-382\n'),(17,'[HERE] мой первый анонс - мимир','@here @mimir\n\nМой первый анонс на мимир\n\nhttps://msg.o3.ru/ozon/pl/ts9nus54dfge8kzag3r3hebfrh\n\nhttps://msg.o3.ru/ozon/pl/oiipj7f7tjrxxpsq83o8o6emhy'),(18,'[MSSQL] группа MSSQL DBA','@db @mssql @staff\n\nГруппа MS SQL DBA\n\n1. стафф:\nстарший админ ibocharov Илья Бочаров\nhttps://staff.o3.ru/profile/ibocharov\n\nруководитель группы bkomarov Борис Комаров\nhttps://staff.o3.ru/profile/bkomarov\n\n2. тикет:\nhttps://jit.ozon.ru/browse/DOTNET-1088\n(демо операция с MSSQL)\n\nответ руководителя:\nJit->INFRASYS-> для компонента @dba_team \nDEV\\STG-есть для каждого кластера\n\n3. задача на создание бд:\nhttps://jit.ozon.ru/browse/INFRASYS-71736'),(19,'[DUTY] warmuphostedservice throwed an exception','@keykloak @warmuphostedservice @клоака\n \nThe background service WarmUpHostedService throwed an exception\nSystem.Net.Http.HttpRequestException: Response status code does not indicate success: 425\n\nприлегла клоака\n\n1. треды:\nhttps://msg.o3.ru/ozon/pl/hakzuwhuafri381ydci6kg4ajw\n\nhttps://msg.o3.ru/ozon/pl/w9czfako6id6imy6jxau4gfjso\n\n'),(20,'[DUTY] le + platform metadata','@LE @platformmetadata @iplatformmetadata\n\n1. тред с вопросом:\nhttps://msg.o3.ru/ozon/pl/ezx9mapaybnaux59k3pgbhsuuo\n\nвнутри всего понемногу'),(21,'[DUTY] overload стопнулся','@overload\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/zs38ouascfb8zxz4hpet37kwpo\n\nHostedService оверлоада стопнулся т.к. деплой на канарейке\nВ треде - вопрос и логи\n\n[DispatcherListener] Error while listening for ammo tasks was handled. Next attempt is starting'),(22,'[Duty] npgsql','@npgsql\n\n1. большой тред - вопрос про метрики и коннекшны pg\nhttps://msg.o3.ru/ozon/pl/ixmi39txbbnkdefm8x6yuez5sy'),(23,'[RTC] build tasks RTC get started','@getstarted @rtc\n\n1. ссылка на доку:\nhttps://gitlab.ozon.ru/platform/dotnet/tools/build-tasks/-/blob/master/docs/rtc.md#get-started\n\n2. тредик:\nhttps://msg.o3.ru/ozon/pl/q4yo6jiupjfjup1xqit8596zcy\n\nищет во всех сборках с префиксом ozon'),(24,'[MSSQL] docker mssql','@docker @mssql\n\n1. из инета:\ndocker pull mcr.microsoft.com/mssql/server\ndocker run -e \"ACCEPT_EULA=Y\" -e \"SA_PASSWORD=Password2+\" -p 1433:1433 -d mcr.microsoft.com/mssql/server:latest\n\n2. версия для тестов платформы:\n:2019-CU15-ubuntu-20.04\n\nENV ACCEPT_EULA=Y\nENV SA_PASSWORD=1:HelpMePlease\nENV MSSQL_SA_PASSWORD=1:HelpMePlease\nEXPOSE 1433\nCMD /bin/sh -c \"(/opt/mssql/bin/sqlservr &) && sleep 10s && /opt/mssql-tools/bin/sqlcmd -S localhost -U sa -P 1:HelpMePlease -d master -Q \'CREATE DATABASE [example]\' && sleep infinity\"\n\n2.1\ndocker run -e \"ACCEPT_EULA=Y\" -e \"SA_PASSWORD=Password2+\" -e \"MSSQL_SA_PASSWORD=Password2+\" -p 1433:1433 -d mcr.microsoft.com/mssql/server:2019-CU15-ubuntu-20.04\n\n2.2 в контейнере:\n/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P \"Password2+\"\n/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P \"1:HelpMePlease\"\n\n2.3 в sqlcmd выdполнить:\ncreate database ms_sql_test_db;\nselect name from sys.databases;\ngo\nuse test_db\nselect DB_NAME(@@PROCID)  (отдает null)\nEXEC sp_helpdb TestBase;\nSELECT * FROM INFORMATION_SCHEMA.TABLES\n\n2.3 чтобы запустить тесты в контейнере:\nа) сбилдить контейнер: ENTRYPOINT /opt/mssql/bin/sqlservr\nб) запустить контейнер: docker run -it -d --name mstrycont mstry\nв) запустить на нем команду:\ndocker exec -t mstrycont /opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P 1:HelpMePlease -Q \"create database ms_sql_test_db;\"\n\ndocker build -f Dockerfile2 --no-cache --progress=plain .\n\nConnectionString = \"TrustServerCertificate=True;Max Pool Size=1000\";\n\n2. экзек\ndocker exec -it <container_id|container_name> /opt/mssql-tools/bin/sqlcmd -S localhost -U sa -P <your_password>'),(25,'[DOCS] csharp pdf','@pdf @c#\n\nPdfSharpCore\n\n1. тредик:\nhttps://msg.o3.ru/ozon/pl/dxxhfxfe5idh8f1qrpcxp95fdr'),(26,'[docs] полезные ссылки','@полезное\n\n1. графана с платформой, сервисы на .net:\nhttp://grafana.o3.ru/d/WDeO0bJWz/net-platform-overview?orgId=1\n\n2. @опси @дежурства:\n- старое расписание:\nhttps://ozon.app.opsgenie.com/settings/schedule/detail/0b54f8b2-1132-4fb9-b4b5-0c9845438a84\n- новое расписание: https://opszone.o3.ru/teams/pl_dotnet_team\n- частые вопросы @FAQ: https://confluence.ozon.ru/display/PLAT/@platform_dotnet_duty\n\n3. @regex дебаг регексов\nhttps://www.debuggex.com/\n\n4. @3blues1brown математические видосы\nhttps://www.3blue1brown.com/\n\n5. @фурье\nhttps://www.youtube.com/watch?v=spUNpyF58BY\n\n6. @agile\nhttps://jit.ozon.ru/secure/RapidBoard.jspa?rapidView=1971&projectKey=DOTNET&quickFilter=14334\n\n7. @staff\nhttps://staff.o3.ru/profile/nikomedvedev\n\n8. @chrome поиск по закладкам\nchrome://bookmarks\n\n9. @dotnext\nhttps://my.jugru.org/tickets\n\n10 @sources @netsources\nhttps://source.dot.net/#System.Private.CoreLib/String.Comparison.cs,11648d2d83718c5e,references'),(27,'[THANOS] запрос по ресурсам на контейнер','@thanos @observability\n\n1. запрос:\nhttp://thanos-query-frontend.monitoring.stg.s.o3.ru/graph?g0.expr=process_num_threads%7Bservice%3D%22platform-demo-services%22%2C%20container%3D%22platform-demo-services-release-overload-test-929%22%7D&g0.tab=0&g0.stacked=0&g0.range_input=1h&g0.max_source_resolution=0s&g0.deduplicate=1&g0.partial_response=0&g0.store_matches=%5B%5D\n\n1. тредик:\nhttps://msg.o3.ru/ozon/pl/uyasfrdzo7yruqmcbofsr5f4nc'),(28,'[s2s] дока по авторизации','@s2s\n\n1. ссылка на доку:\nhttps://confluence.ozon.ru/display/PLAT/17.+Service2Service+Authorization'),(29,'[PLTFRM] ресурсы','@мемкэш\n1. варден на наш мемкэш:\nhttp://warden.platform.stg.s.o3.ru/endpoints?service=platform-demo-services-memcached:memcached\n\n@редис\n2. варден на редис:\nhttp://warden.platform.prod.s.o3.ru/endpoints?service=platform-demo-services-redis:redis\n\n2.1 графана на редис:\nhttp://grafana.o3.ru/d/anw7h7Omk/redis-cluster?orgId=1&refresh=1m&var-datasource=%5BPROD%5D%20K8S%20Prometheus&var-cluster=platform-demo-services-redis&var-host=All&var-instance=All&var-interval=$__auto_interval_interval\n\n@itcredis секреты, сгенеренные в itc\nhttps://vault.s.o3.ru:8200/ui/vault/secrets/o-secret/show/dev/platform/dotnet/demo-services/redis_platform-demo-services-redis\n\n@vault @demoservices секреты\n1. dev:\nhttps://vault.s.o3.ru:8200/ui/vault/secrets/o-secret/list/dev/platform/dotnet/demo-services/\n\n2. stg:\nhttps://vault.s.o3.ru:8200/ui/vault/secrets/o-secret/list/stg/platform/dotnet/demo-services/\n\n3. prod: \nhttps://vault.s.o3.ru:8200/ui/vault/secrets/o-secret/list/prod/platform/dotnet/demo-services/'),(30,'[Redis] документация','@redis\n\n1. доки по деплою @redisdeploy\nhttps://confluence.ozon.ru/pages/viewpage.action?pageId=85833707#Redis(%D0%B4%D0%B5%D0%BF%D0%BB%D0%BE%D0%B9)-Sentinel\n\nhttp://itcrowd-help.infra-ts.a.o3.ru/help/resursy/redis/\n\n2. @rediscli\nredis-cli -h 10.53.70.0 -p 6379 -a m-Vk9vDGRMsoSM0RUL9o PING\n\nпинг нашего редиса с паролем - все ок'),(31,'[DOCS] онбординг','@onboarding\n\n1. доки по онбордингу:\nhttp://devs-onboarding.prod.a.o3.ru/'),(32,'[OZON] отпуска','@отпуск\n\n1. тредик по отпускам:\nhttps://msg.o3.ru/ozon/pl/cq9gyi1q17n79ja6zgns7kwf1r\n\n@here всем привет!\n\nс 4 по 15 июля я буду в отпуске :palm_tree: и, пользуясь случаем, хотела бы оставить тут контакты по \"классическим\" HR вопросам. К слову, эти контакты актуальны в любое время)\n\n1) ВСЕ, что связано с отпусками и больничными - для Москвы: @vislamova  или [кадры в вашем регионе](https://confluence.ozon.ru/pages/viewpage.action?pageId=178973299)\n2) смена графика работы - [кадры в вашем регионе](https://confluence.ozon.ru/pages/viewpage.action?pageId=178973299)\n3) обучение - в большинстве случаев @mpogodina, или она вас перенаправит\n4) вопросы по зарплате - для Москвы: @mtursunova или [кадры в вашем регионе](https://confluence.ozon.ru/pages/viewpage.action?pageId=178973299) ; все о зарплатных проектах [тут](https://confluence.ozon.ru/pages/viewpage.action?pageId=175632711)\n5) вопросы по ДМС - @dfilippova  \n6) шаблоны заявлений - [тут](https://staff.o3.ru/documents) ; реквизиты компании - [тут](https://staff.o3.ru/staff-handbook/org_issues/#%D1%80%D0%B5%D0%BA%D0%B2%D0%B8%D0%B7%D0%B8%D1%82%D1%8B-%D0%BA%D0%BE%D0%BC%D0%BF%D0%B0%D0%BD%D0%B8%D0%B8)\n7) нужна справка 2НДФЛ/копия трудовой и тд - [заявка](https://jira.ozon.ru/servicedesk/customer/portal/22)\n8) командировки - [см пост выше](https://msg.o3.ru/ozon/pl/fcmh4q7ugtdpzrmuznybhkqezr)\n9) Ozon Tech Employee Handbook - [тут](https://confluence.ozon.ru/pages/viewpage.action?pageId=135214769)\n\nНу а на время моего отсутствия обращайтесь, пожалуйста, к вашему руководителю, или моей коллеге HR BP @ochechkina, или дождитесь моего возвращения :hugging_face: '),(33,'[CMD] команды','@git\ngit log --pretty=oneline\ngit config --global core.autocrlf false\ngit config --global url.\"git@gitlab.ozon.ru:\".insteadOf https://gitlab.ozon.ru/\ngit config --global --unset url.\"git@gitlab.ozon.ru:\".insteadOf\ngit rev-parse --show-toplevel\ngit remote get-url origin\ngit clean -fxd\ngit config --get remote.origin.url\ngit remote show origin\nвыполнить команду git в конкретной папке:\n(cd ./common/ && git config --get remote.origin.url)\nTo replace all occurrences, use: ${parameter//pattern/string}:\n${variable//[\\/]/\\\\}\nсплит: local ci_repository_url=${CI_REPOSITORY_URL##*@}\nесть # ## % %%: ${parameter##[word]}\n\n@kubectl\nkubectl get svc -o wide | grep paypal\nkubectl get po -o wide | grep paypal\n\n@linux\nпоиск файлов, содержащих строку в названии:\nfind / -name \'*Metadata.*\'\nзапуск скрипта:\n. ./metadata.sh && generate_metadata_task\n. ./common.gitlab-ci.sh && dotnet_find_projects src *.csproj\nDOTNET_ENTRYPOINT_PROJECT_PATH=abc&&\\\nSERVICE_NAME=\"s\"&&K8S_NAMESPACE=\"k\"\necho \"$DOTNET_ENTRYPOINT_PROJECT_PATH\"\n\n@echo @bootstrap @echo_error - там все эхи короч собраны:\nhttps://gitlab.ozon.ru/rminishev/bootstrap/-/blob/1.0/bootstrap.gitlab-ci.yml'),(34,'[GITLAB] работа с ozon registry','@registry\n\n1. логин-билд-пуш\ndocker login gitlab-registry.ozon.ru\n\ndocker build -t gitlab-registry.ozon.ru/platform/dotnet/platform-test-images .\n\ndocker push gitlab-registry.ozon.ru/platform/dotnet/platform-test-images'),(35,'[VAULT] перенос строки в токене волта','@секрет\n\n1. обсуждение\nhttps://msg.o3.ru/ozon/pl/qz8doe15tbfhueqrm8qgqa4uky'),(36,'[DUTY] политика ретраев grcp','@grpc @retrypolicy\n\n1. обсуждение\nhttps://msg.o3.ru/ozon/pl/8j4be7qcyfgtzms5qz611e3e1o'),(37,'[DUTY] grpc и useclientsidebalancing timeout','@useclientsidebalancing @timeout\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/11eysutbftytbfth4ch47qic8r\n\ngrpc падает с таймаутом при вызове с UseclientSideBalancing = true\nРешение - перевыложить адресуемый сервис'),(38,'[DOCS] templates','@xo3app @xo3pkg @шаблоны @o3app @o3pkg\n\n1. проекты шаблонов o3-app и o3-pkg:\nhttps://gitlab.ozon.ru/platform/dotnet/tools/o3-app\nhttps://gitlab.ozon.ru/platform/dotnet/tools/o3-pkg\n\n2. доки по шаблонам:\nhttps://confluence.ozon.ru/pages/viewpage.action?pageId=117027536\n\nhttps://confluence.ozon.ru/pages/viewpage.action?pageId=251727380'),(39,'[DOCS] pipeline assembly metadata','@metadata @assemblymetadata @метаданные\n\n1. тикет\nhttps://jit.ozon.ru/browse/DOTNET-1091?workflowName=Ozon+Development+Flow&stepId=2\n\n2. в консоли разработчика VS можно посмотреть ildasm: C:\\Users\\nikomedvedev\\Desktop\\pltfrm\\platform\\src\\core\\Ozon.Platform\\bin\\Debug\\net6.0\\Ozon.Platform.Abstractions.dll\n\n3. меняю три ref на \'DOTNET1091-1.0\':\nhttps://gitlab.ozon.ru/dotnet/ci/common/-/blob/1.0/common.gitlab-ci.yml#L21\nhttps://gitlab.ozon.ru/pub/ci/-/blob/0.0.5/.dotnet-packages.gitlab-ci.yml#L8\nhttps://gitlab.ozon.ru/pub/ci/-/blob/0.0.5/.dotnet.gitlab-ci.yml#L4\nзапускаю пайп с новым ref и смотрю\n\n4. generate.sh\nhttps://gitlab.ozon.ru/dotnet/ci/common/-/blob/1.0/tasks/application/generate/metadata.sh'),(40,'[TRACING] трейсы с ошибками','@jaeger @trace\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/oirzf538utfy3g13a1iqa1j8re\n\n2. сэмплирование трейсов с ошибками (не сэмплируются)'),(41,'[K8S] kubectl команды','@kubectl @куберкоманды @кубер\n\n1. зайти на под:\nkubectl exec -it platform-demo-services-release-overload-test-929-574d6777885vn9 -- bash\n\n2. скопировать файл с пода (исполняемый файл сервиса):\nkubectl cp platform-demo-services-release-dotnet-1121-7b6dcbfb94-5dqr9:/app/Ozon.Platform.DemoServices.dll demoservices.dll'),(42,'[DUTY] пропали rtc','@rtc\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/94aof8hmbiyjjd6fkod1f5769c\n\nпропали реалтайм конфиги)'),(43,'[DUTY] нугет конфиг','@artifactory @nuget\n\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<configuration>\n  <packageSources>\n    <clear />\n    <add key=\"Artifactory\" value=\"https://artifactory.s.o3.ru/artifactory/api/nuget/v3/nuget-virtual-virtual\" protocolVersion=\"3\" />\n </packageSources>\n</configuration>\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/uxmfpiyyb3nkfpfjyhse8s5sgr'),(44,'[DUTY] ошибки обновления pg реплик','@Masterreplicaundefined\n\n1. тред:\nMaster replica undefined\nhttps://msg.o3.ru/ozon/pl/855bzmrb93ye5ew4c78fqc1g8r\n\n2. причина - пустой ответ от вардена'),(45,'[DUTY] кафка','@kafka\n\n\"Topic \'metazon_tpl_delivery\' has no subscribed consumers\"\nhttps://msg.o3.ru/ozon/pl/ajua3n48ejf4bjgyr9rjs4fz7c\nНе коммитит\nЛоги показали битые сообщения, потому консьюмер не коммитал'),(46,'[CMD] bash для tagit','@bash @tagit\n\n1. снять дамп:\nDB_HASH=`docker ps | grep mysql | grep -E -o \"^\\S+\"` && \\\nDATE=\"$(date -u +\"%Y-%m-%d\")\" && \\\ndocker exec -it $DB_HASH mysqldump --host=localhost --user=root --password=1 tagit > ./tagit-$DATE.dump \n\n2. коммит из билда:\ncd /mnt/f/tagit/src && \\\ndocker-compose down && \\\ndocker image rm nick219nick/tagit:v1 && \\\ndocker-compose build && \\\ndocker-compose up -d && \\\nR_C_HASH=`docker ps | grep tagit | grep -E -o \"^\\S+\"` && \\\ndocker commit -a Nick219 -m v1 ${R_C_HASH} nick219nick/tagit:v1 && \\\ndocker push nick219nick/tagit:v1;'),(47,'[PLTFRM] назначение пакетов','@platformpackages\nOzon.Platform - основной метапакет, который должны ставить все разработчики. Включает в себя также базовые классы для настройки и подключения других модулей платформы. \nAbstraction - выделенные интерфейсы и классы, которые используются внутренними и внешними сборками для взаимодействий, без учета реализации этих интерфейсов. Используется в библиотеках, которым не требуется реализация, а лишь контракт.\nAnnotations - содержит классы-атрибуты, которые используются платформой для различных генераций и др. На текущий момент пока содержит только атрибуты для RTC\nBuild - пакет для поддержки сборки проекта платформы. Кажется используется для того, что бы транзитивно наши настройки не улетали во внешние либы.\nCircuitBracker - содержит все классы для работы с CircuitBracker.\nCommon - не сильно отличается от Abstraction. По идее эти сборки можно объединить как-то, т.к. они содержать логически одинаковые модули кода.\nConfiguration - содержит вспомагательные классы для работы с конфигурацией в сервисах. Эту часть, вполне можно втащить куда-то еще, т.к. напрямую в платформе почти не используется в других сборках, а часть классов вообще ужe Obsolete\n'),(48,'[PLTFRM] пакеты - 2','Diagnostics - содержит базовые классы для всех диагностик в платформе. Этот пакет может быть использован как в платформе так и у внешних пользователей. Вероятно в будущем он либо исчезнет, либо адаптируется при переходе на OpenTelemetry\nExtensions - тупо вспомогательные классы-расширения для различных кейсов. Может использоваться как внешними так и внутренними либами.\nGrpc - пакет для поддержки работы с инфраструктурой grpc.\nHttp - пакет для поддержки работы с инфраструктурой http. Кажется можно объединить grpc и http в один пакет, т.к. суть разницы у них не много.\nHeadersForwarding - используется для поддержки проброса заголовков. \nHealthChecks - добавляет классы для поддержки работы кастомных хелсчеков.\nInfrastructure - содержит общие классы для работы с внешним инфраструктурным окружением и внутренними инфраструктурными особенностями платформы.\nInternal - содержит общие классы, фичи и т.п. для внутренних пакетов платформы. Возможно имеет смысл объединить с другими сборками.\nJaeger - содержит набор классов для включения трейсингов в платформе на базе Jaeger. Вероятно в будущем он либо исчезнет, либо адаптируется при переходе на OpenTelemetry\nLogging - содержит набор классов для поддержки кастомного логирования на базе либы Serilog.\nMetrics - содержит классы с определенеим метрик для разных частей платформы. Эти метрики надо расположить там, где есть те, кто их используют. А эту сборку выпилить.\n'),(49,'[PLTFRM] пакеты - 3','OpenTracing - используется больше для расширения данных в спанах в OpenTracing. Вероятно в будущем он исчезнет при переходе на OpenTelemetry\nPrometheus - содержит классы включающие поддержку прометея в платформе. Есть вариант вынести это в метапакет, т.к. большого смысла в этой сборке нет.\nRateLimiter - содержит все классы для работы с RateLimiter.\nSqlClient - содержит классы для включения метрик и трейсов при работе с MsSql. По идее их нужно утащить в сборку Ozon.Platform.Data.MsSql, но именно на нее мало кто переходит, поэтому сборка пока оставлена, что бы не делать серьезный BC для многих команд\nSwagger - содержит классы включающие поддержку Swagger в платформе. Есть вариант вынести это в метапакет, т.к. большого смысла в этой сборке нет.\nOzon.Platform.Data - базовый пакет для работы с различными внешниеми источниками данных. Сюда были внесены пакеты Vault и Etcd, т.к. без этих фич доступ к внешним источнимам был бы невозможен. Когда проектировался предполагалось, что не всем сервисам нужны данные. В текущих условиях - vault и etcd теперь нужен в принципе всем. Так что эта либа может быть уже включена в пакет Ozon.Platform напрямую с вызовом инициализации.\nAbstraction - содержит общие интерфейсы и классы в основном для доступа к разным БД. Используется внешниеми либами, для подключения общих интерфейсов без учета их реалиазации.\nOzon.Platform.ServiceDiscovery - это реализация клиента и инфраструктуры для вардена, по сути internal реализация интерфейса IInternalServiceDiscovery, который используется по всей платформе.'),(50,'[DUTY] не закоммитан .dotnet-tools.json','@MSB3073\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/bc4jjxp9bfnsbdk7roaiqewo4y\n\nиз лога билда:\nTask \'Platform_ProtoLint\' has been started.\nTask \'Platform_GrpcGenerate\' has been started.\nCould not execute because the specified command or file was not found\nerror MSB3073: The command \"dotnet platform grpc generate exited with code 1\nCould not execute because the specified command or file was not found\nYou misspelled a built-in dotnet command\nYou intended to execute a .NET program, but dotnet-platform does not exist\nYou intended to run a global tool, but a dotnet-prefixed executable with this name could not be found on the PATH\n\n2. решение - добавить файл манифеста .dotnet-tools.json в VCS\n\nВот вы когда обновились на тулинг 7+, вы должны были поставить Ozon.Platform.Tools.Bootstrap, он автоматически должен был установить локальный тулинг Ozon.Platform.Tools и создать файл манифеста .config/dotnet-tools.json в корне решения - его нужно коммитить в VCS, а вы его игнорируете'),(51,'[DUTY] nre в новой версии платформы','@обновились\n\nSystem.ArgumentNullException: Value cannot be null\n\nhttps://msg.o3.ru/ozon/pl/1y4w9um8airadnzgx6icd9478r\nhttps://msg.o3.ru/ozon/pl/uxod4u1katbij8gimhpk1h6b3o\n\nпроверить версии пакетов, транзитивно подтягивается другая зависимость'),(52,'[DUTY] вопрос по сваггеру','@интереснаяхерня @swagger @grpcswagger\n \n1. тредик:\nhttps://msg.o3.ru/ozon/pl/dfi6k5b1f3gyf8t4tc57zw33ah\n\nimport \"protoc-gen-openapiv2/options/annotations.proto\";\noption (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation)\n={ .. };\n\nhttps://grpc-ecosystem.github.io/grpc-gateway/docs/mapping/customizing_openapi_output/\n\n2. у чувака отвалилось, у меня просто ничего не делает\n'),(53,'[DUTY] старый тулинг не работает','@tools\n1. анонс:\nhttps://msg.o3.ru/ozon/pl/674zbitnsprjzdtpn316jtsmqe\n\n2. дока \"план перехода на новую версию тулинга\":\nhttps://gitlab.ozon.ru/platform/dotnet/tools/build-tasks/-/tags/7.0.0.129#upgrading\n\nrtc:\nhttps://gitlab.ozon.ru/platform/dotnet/tools/build-tasks/-/blob/master/docs/rtc.md\n\ngrpc:\nhttps://gitlab.ozon.ru/platform/dotnet/tools/build-tasks/-/blob/master/docs/grpc.md\n\nbootstrap:\nhttps://gitlab.ozon.ru/platform/dotnet/tools/build-tasks/-/tree/master/docs\n\n3. тредик с вопросом:\nhttps://msg.o3.ru/ozon/pl/rhm871xpe3g15bsbgpax576i4h'),(54,'[DUTY] вопрос по репликам бд','@sync @async @master @реплики бд\n\n1. тредик:\nhttps://msg.o3.ru/ozon/pl/xqpzz4z4nifk8dar61di996tpc\n\nподскажи плз в бд ReplicaRole.Readonly она синхронная с мастером или стоит лучше использовать ReplicaRole.Sync чтобы наверняка? \n\nAleksandr Sankov:\nSync - только синхронная с мастером\nReadOnly - либо Sync, либо Async раундробином'),(55,'[GITLAB] переменные','@gitlabci\n\nпеременные gitlab ci:\nhttps://docs.gitlab.com/ee/ci/variables/predefined_variables.html\n\nhttps://docs.gitlab.com/ee/administration/environment_variables.html'),(56,'[POSTGRE] варден запрос для pg','@pg @warden\n\nhttp://warden.platform.stg.s.o3.ru/endpoints?service=dotnet-sandbox-postgresql.pg:bouncer'),(57,'[DUTY] не прокидываются endpoints в redis','@редисэндпоинты @эндпоинты\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/wy1679fn5tggmxgs5teihezeeh\n\n2. тикет:\nhttps://jit.ozon.ru/browse/DOTNET-1132\n\nбаг по причине StackExchange, Endpoints без сеттера\n\nENDPOINTS редиса ридонли, но там есть Add к этой коллекции, \nпример есть в онбординге'),(58,'[DUTY] обсуждение s2s ошибок 400 vs 403','@s2s\n\nhttps://msg.o3.ru/ozon/pl/z1uobg6z3jyfxcp6a3wxa68kmw'),(59,'[DUTY] пипец с билдтасками','@заебло\n\nOption \"(grpc.gateway.protoc_gen_swagger.op\ntions.openapiv2_operation)\" unknown\n\nhttps://pkg.go.dev/github.com/grpc-ecosystem/grpc-gateway/protoc-gen-swagger/options\n\nhttps://github.com/OAI/OpenAPI-Specification/blob/3.0.0/versions/2.0.md#operationObject\n\n1. тред:\nhttps://msg.o3.ru/ozon/pl/7c3wwyw65jy69drpuzzhi5bd1e\n\nпиздец с выкачанными и локально поднятыми WKT proto\n\nI. хочет завендорить:\nhttps://gitlab.ozon.ru/sortcenter/inventory-sc/-/blob/master/src/Ozon.Sortcenter.Inventory.Sc.ExemplarInfoService/proto/ExemplarInfoService.proto#L8\n\nII. там import \"protoc-gen-swagger/options/annotations.proto\";\n\nIII. посоветовал fqdn: import \"gitlab.ozon.ru/platform/fork-grpc-gateway/protoc-gen-openapiv2/options/annotations.proto\";\n- озоновский адрес: https://gitlab.ozon.ru/platform/fork-grpc-gateway/-/blob/master/protoc-gen-openapiv2/options/annotations.proto\n- родной адрес: https://github.com/grpc-ecosystem/grpc-gateway/blob/master/protoc-gen-openapiv2/options/annotations.proto\n\nРЕШЕНИЕ: import \"github.com/grpc-ecosystem/grpc-gateway/protoc-gen-openapiv2/options/annotations.proto\"; и замена protoc_gen_swagger на protoc_gen_openapiv2'),(60,'[DUTY] флуд ошибки keycloak','@флуд\n\nhttps://msg.o3.ru/ozon/pl/z1uobg6z3jyfxcp6a3wxa68kmw\n\nпочему клоака отдает 400 а не 403 и что писать в лог'),(61,'[GITLAB] выставляем тэг на релиз пакетов','@писец @run_ci\n\n1. на шаге \'build\' в контейнере работает apt update и apt install\n2. работает curl, токен на запись можно прокинуть снаружи\n3. в build нельзя в yml выбирать шаги, доступны .pre, close, .post - \n на них можно определить свою джобу: stage, script, when, need\n4. нельзя переопределять некоторые джобы:\n https://gitlab.ozon.ru/pub/ci/-/blob/0.0.5/validate-jobs.yml\n5. run_ci:\n https://gitlab.ozon.ru/deploy/ci/-/blob/1.5.x/functions.sh#L4107\n6. поставился git - GITLAB_API_TOKEN не дает пушить тэг, как и с \n курлом, наверное, можно прокинуть свой токен (CI_JOB_TOKEN с гитом не проверял, но curl POST с ним не прокатывает)\n7. на каком образе запуcкается das-cli? image: $DOCKER_CI_IMAGE\n8. создал тэг вместе с релизом.. =)\n\nreleases:\n  image: $DOCKER_CI_IMAGE\n  stage: \'close\'\n  before_script:\n    - export PIPE_VERSION=\"0.0.5\"\n    - export CI_VERSION=\"${CI_VERSION:-1.5.x}\"\n    - echo \"$CI_VERSION\"\n    - eval \"$(curl -m 60 -s https://gitlab.ozon.ru/deploy/ci/-/raw/$CI_VERSION/functions.sh)\"\n    - check_dascli_ver\n  script:\n      - echo \"TEST RELEASE\"\n      - version_name=\"${JIRA_VERSION_PREFIX}${REPO_NAME}${RELEASE_SUF}_${RELEASE_TAG}\"\n      - gitlab_create_release \"${version_name}\"\n      - echo ${version_name}\n  when: manual\n  needs:\n    - \"error\"\n\nbash: 2>&1 \nFile descriptor 1 is the standard output (stdout).\nFile descriptor 2 is the standard error (stderr).'),(62,'[DUTY] магия редис правильный ответ','@магияредис\n\nhttps://msg.o3.ru/ozon/pl/m163o9dkot8wppdn167kfg6mzr\n\nМы поставляем IDistributedCache - вся магия на стороне разработчика'),(63,'[DUTY] поиск пакета для AddCustomBuckets','https://msg.o3.ru/ozon/pl/3u45wswnubfetqtik7zjwgxaec\n\nAddCustomBuckets ide \nне находит, а rider не может подсказать какую сборку нужно импортировать\n\nStartup.cs(140, 22): [CS1061] \'IServiceCollection\' does not contain a definition for \'AddCustomBuckets\' and no accessible extension method \'AddCustomBuckets\' accepting a first argument of type \'IServiceCollection\' could be found (are you missing a using directive or an assembly reference?)\n\nОтвет: Значит не все либы были обновлены до последней версии'),(64,'[DUTY] ошибки с миграциями','\n\nhttps://msg.o3.ru/ozon/pl/q1gcatoohfn6dkdxu1ckbfcw5e\n\nUnhandled exception. System.IO.FileNotFoundException: Could not load file or assembly \'Microsoft.Extensions.DependencyInjection.Abstractions, Version=2.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60\'. The system cannot find the file specified\n\nпример нашего кода с миграциями:\nhttps://gitlab.ozon.ru/platform/dotnet/demo-services/-/blob/master/src/Ozon.Platform.DemoServices/Program.cs#L20\n\nне помогло:\ninfra-dev:deploy не прожата\nа давай dry-run запустим\nзапусти dotnet migrate\n'),(65,'[DUTY] s2s ошибки','@s2s\n\n[14:28:36 ERR PLTFRM]  Error while acquiring token to access service \'lsplt-place-api\'\nSystem.Net.Http.HttpRequestException: Response status code does not indicate success: 401 (Unauthorized).\n   at System.Net.Http.HttpResponseMessage.EnsureSuccessStatusCode()\n   at Ozon.Platform.Http.S2SAuthorization.OAuthServerClient.GetAccessToken(String requestingServiceName, String targetServiceName, String requestingServiceSecret, CancellationToken cancellationToken)\n   at Ozon.Platform.Http.S2SAuthorization.AccessTokenUpdateService.DoUpdating(String serviceName, CancellationToken cancellationToken)\n\nNo client secret for service-to-service authorization\n\nответ: Нет секрета в Vault\n\n1. тредик:\nhttps://msg.o3.ru/ozon/pl/ndkg1cujsjfp8f7rqfdez554je'),(66,'[DUTY] нет rtc переменной','@rtc @REALTIME_CONFIG_PROJECT\n\nNo \'REALTIME_CONFIG_PROJECT\' environment variable defined\n\n1. тредик:\nhttps://msg.o3.ru/ozon/pl/hocp1q1ik7dk8yoz8qfr5keyme\n\n2. ответ:\nREALTIME_CONFIG_PROJECT - это id проекта из гитлаба, а VERSION - это ветка нормализованная. Как воркэраунд, можно указать рантаймовую конфигурацию в UsePlatform: options.Etcd.Project, options.Etcd.Version :\n\n.UsePlatformData(\n        options =>\n        {\n            options.Etcd.Project = \"\";\n            options.Etcd.Version = \"\";\n        })\n'),(67,'[DUTY] вопросы по тулу','1. обсуждение:\nhttps://msg.o3.ru/ozon/pl/1scg418w9trbzcsk46j3zw4cbw\n\nменяются концы строк, мой тикет:\nhttps://jit.ozon.ru/browse/DOTNET-766'),(68,'[DUTY] вопросы по тулу, мой тикет','https://msg.o3.ru/ozon/pl/15axzdkwnfgyjj4hghxjxwshpo\n\nThe command \"dotnet platform rtc generate \"/builds/pay/processing/cards/src/Api//builds/pay/processing/cards/artifacts/app/\" --output \"*Undefined*.o3\\k8s\"\" exited with code 1. \n\nв тикете WA до выпуска моего патча\n\n\n'),(69,'[DUTY] дубли в swagger google.api.http','@grpcswaggererror grpc swagger error @unresolved\n\n1. https://msg.o3.ru/ozon/pl/nzs4bpn883f63m8kwup7ro1zyo\n\n2. Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Conflicting method/path combination \"POST MisgradingGrpc/V1Approve\" for actions - ,. Actions require a unique method/path combination for Swagger/OpenAPI 3.0. Use ConflictingActionsResolver as a workaround\n   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)\n\n3.Microsoft.AspNetCore.Routing.Matching.AmbiguousMatchException: The request matched multiple endpoints. Matches: \ngRPC - /MisgradingGrpc/V1Query\ngRPC - /MisgradingGrpc/V1Query\n\n/MisgradingGrpc/V1Approv вроде уникальны\n\nПОКА НЕ РЕШЕНО !!! но по ходу херня, не подтвердилось'),(70,'[DUTY]','https://msg.o3.ru/ozon/pl/9w19a8knwt8bf8hwqemiwd8qqe\n\n@httpclient\n\nBaseAddress=null у HttpClient\nэксепшн:\nInvalid request URI provided BaseAddress must be set\n\nОказалось, вместо RegisterHttpClient использовали AddHttpClient'),(71,'[DUTY] траффик в два ночи','https://msg.o3.ru/ozon/pl/4rzon86kjff3fgtgyieet8zogc'),(72,'[DUTY] история с токеном','https://msg.o3.ru/ozon/pl/tmy9ji7hr3grugawna7mb18tpw'),(73,'[DUTY] ответ 500 и проброс заголовков','https://msg.o3.ru/ozon/pl/6u5fnk851jbzmkwnmmqhqmm8ph\n\nhttps://docs.microsoft.com/en-us/aspnet/core/fundamentals/error-handling?view=aspnetcore-6.0#server-exception-handling\n\nПри ответе 500 кестрел удаляет заголовки'),(74,'[GITLAB] переменные гитлаба','$ echo \"${CI_DOTNET_IMAGE}\"\ngitlab-registry.ozon.ru/docker/dotnet/sdk-platform:master\n$ echo \"${DOCKER_CI_IMAGE}\"\ngitlab-registry.ozon.ru/docker/ci:latest'),(75,'[DUTY] кастомные бакеты','@observability @metrics\n\nhttps://msg.o3.ru/ozon/pl/k11f5xjd4idsjfnteikh95x5rc\n\nкастомные бакеты и потеря метрик на графане.\nдобавление кастомных бакетов может привести к потере отображения на графане.'),(76,'[OZON] отпуска (часть вторая)','@отпуск\n\nконтакты по \"классическим\" HR вопросам\n\n1) ВСЕ, что связано с отпусками и больничными - для Москвы: @Вуся  или кадры в вашем регионе\n2) смена графика работы - кадры в вашем регионе\n3) обучение - в большинстве случаев @Marina Pogodina, или она вас перенаправит\n4) вопросы по зарплате - для Москвы: @Malika Tursunova или кадры в вашем регионе ; все о зарплатных проектах тут\n5) вопросы по ДМС - @Daria Filippova\n6) шаблоны заявлений - тут ; реквизиты компании - тут\n7) нужна справка 2НДФЛ/копия трудовой и тд - заявка\n8) командировки - см пост выше\n9) Ozon Tech Employee Handbook - тут\n\nНу а на время моего отсутствия обращайтесь, пожалуйста, к вашему руководителю, или моей коллеге HR BP @Olga Chechkina, или дождитесь моего возвращения :hugging_face: '),(77,'[DUTY] grpc tools и rpcexception','@grpcaspnetcore\nобновили grpc.tools на 7.0.5.216 - стали ловить эксепшн:\n\nRpcException: Status(StatusCode=\"Unknown\", Detail=\"Exception was thrown by handler.\")\n\n1. тредик:\nhttps://msg.o3.ru/ozon/pl/sq1iinuz5jyh7f47niz6unkyow\n\n2. тред с решением:\nhttps://msg.o3.ru/ozon/pl/ob9nbc19ajbczcnu6rh5b5bpsa\n\nБольшая просьба - не обновлять Grpc.AspNetCore выше версии 2.43.0 Она не совместима с платформой'),(78,'[TICKET] 1101 проверка yml для repo scanner','https://jit.ozon.ru/browse/DOTNET-1101?workflowName=Ozon+Development+Flow&stepId=2'),(79,'[GITLAB] создание release','@release\n\n1. release-cli: пайп с deploy не стриггерится:\n\nrelease create job:\n  image: registry.gitlab.com/gitlab-org/release-cli:latest\n  stage: \'publish\'\n  when: manual\n  needs:\n    - \"error\"\n  script:\n    - echo \"RUNNING TEST RELEASE CREATE JOB\"\n  release:\n    tag_name: $CI_COMMIT_SHA\n    name: \'Release $CI_COMMIT_SHA\'\n    description: \'Release created using the release-cli.\'\n\n2. das-cli: пайп с deploy стриггерится:\n\ntag job post:\n  image: $DOCKER_CI_IMAGE\n  stage: \'.post\'\n  before_script:\n    - export PIPE_VERSION=\"0.0.5\"\n    - export CI_VERSION=\"${CI_VERSION:-1.5.x}\"\n    - echo \"$CI_VERSION\"\n    - eval \"$(curl -m 60 -s https://gitlab.ozon.ru/deploy/ci/-/raw/$CI_VERSION/functions.sh)\"\n    - check_dascli_ver\n  script:\n    - echo \"DEPLOY TAG ${DEPLOY_TAG}\"\n    - echo \"${CI_PROJECT_ID}\"\n    - echo \"${CI_COMMIT_SHA}\"\n    - name=\"${CI_COMMIT_SHA}\"\n    - echo \"SET TAG ${name}\"\n    - das-cli create gitlab-tag -p \"${CI_PROJECT_ID}\" -b \"${CI_COMMIT_SHA}\" -t \"${name}\"\n    - echo \"CREATE TAG TEST FINISH\"\n  when: manual\n  needs:\n    - \"error\"'),(80,'[SHARPLAB] exc - 1','@exc1\n\nвызовы экземплярных методов\n\nhttps://sharplab.io/#v2:EYLgxg9gTgpgtADwGwBYA0AXEBDAzgWwB8ABAJgEYBYAKGIAYACY8gOgCUBXAOwwEt8YLAMIR8AB14AbGFADKMgG68wMXAG4aNYgGYmpBkIYBvGgzMMA2gFkYGABYQAJgElxkgBQ37T12MkB5MT4ILlwWADkIZy5JXi44gHMASgBdU3MdBjiMBit3bIZsJON083NsBgBeQoYAagZyDWoystKW4gB2QqaygF8afuotXTIGABES5rbM4hQGAFF3JLaTZrLDCCqGLhgAdwMlnpazNqyeGuqAViPj04LgLYgWPKKbltPmAE53YCS3wfMA00tBG+nmkwY0xGcwAYksVqcNlsdvshIdToC1uYChVqh03q0sWZ7o9nu5XhiTkSmORvr9/qUBkA='),(81,'[DUTY] ResourceExhausted на проме','https://msg.o3.ru/ozon/pl/1b4xzhxqjtnk3fsmx6whfmnciy\n\nError occured on service discovery subscription on \"dispatcher:grpc\". error: \"Status(StatusCode=\\\"ResourceExhausted\\\", Detail=\\\"client needs to reconnect\\\")\"\n\nответ:\nWarden принудительно ребалансирует подключения к нему.  \n\nПлатформа, получая такую ошибку от конкретного пода вардена - выбирает другой под и подключается на прослушивание данного ресурсы к нему.'),(82,'[DUTY] новое расписание дежурств','@расписаниедежурств @opsigen\n\n1. оно тут:\nhttps://opszone.o3.ru/teams/pl_dotnet_team'),(83,'[DUTY] истекший токен авторизации','Ozon.Platform.Http.S2SAuthorization.InvalidAccessTokenException: Service-to-service access token has expired\n\nhttps://msg.o3.ru/ozon/pl/mkbumeu8wtyhtjoyhnhidsxu9w\n\nпроверить токен из клоаки:\ncurl \\\n    --location \\\n    --request POST \'https://<keycloack-address>/auth/realms/service2service/protocol/openid-connect/token\' \\\n    --header \'Content-Type: application/x-www-form-urlencoded\' \\\n    --data-urlencode \'grant_type=client_credentials\' \\\n    --data-urlencode \'client_id=s2s|<source-service>\' \\\n    --data-urlencode \'client_secret=<secret>\' \\\n    --data-urlencode \'scope=s2s|<target-service>\'\n\nпричина: захардкодил мусор - истекший токен\n\nна stg и dev в vault / s2s-client-secret кладутся одинаковые секреты (сейчас джоба на dev отвалилась) - это доступ к клоаке по ходу'),(84,'[DUTY] pg игнорируется параметр dbName','@bc @pgbc\n\nOzon.Platform.Data.Abstractions.PlatformDataException: Couldn\'t initialize ConnectionFactory for digital-archive cluster, because MasterHost is null and UseClientSideBalancing is false\n\nПри использовании КБ БД стали игнорировать параметр string dbName, похоже, что подключение проходит по имени кластера:\n Npgsql.PostgresException (0x80004005): 08P01: no such database: digital-archive\n\nhttps://msg.o3.ru/ozon/pl/kpcrto5gtfdo9b4d9ndfjhf9fc\n\nОтвет: читать breaking-changes:\nhttps://gitlab.ozon.ru/platform/dotnet/platform/-/blob/master/docs/breaking-changes.md'),(85,'[DUTY] redis жрет память на проде','@redistroubles @redismemory\n\nhttps://msg.o3.ru/ozon/pl/j45uyu9c9pri7n3t1hqxriig8c\n\nсовет: профилировать или снимать дамп\n\nhttps://github.com/dotnet/diagnostics/blob/main/documentation/dotnet-dump-instructions.md'),(86,'[ITSEC] заявка на безопасников','@безопасники\n\nвыбиваем release-cli:\n\nтред с инструкцией:\nhttps://msg.o3.ru/ozon/pl/rsrzjx3ykt8n8rfykjn9t7g8xc\n\nмоя заявка:\nhttps://jira.ozon.ru/servicedesk/customer/portal/28/ITSEC-13745\n\nосновной тикет:\nhttps://jit.ozon.ru/browse/DOTNET-490'),(87,'[DUTY] опять кафка и треды','@kafka @kafkathreads\n\nhttps://msg.o3.ru/ozon/pl/4517jgrk4t8x8pap1s8cpznp8o\n\nтреды растут)'),(88,'[DUTY] через балансировку к релизной ветке','ниче не понял)\n\nhttps://msg.o3.ru/ozon/pl/onexty6h6irq3nfuf5a3bepdgo\n\nхэдеры и mesh-version'),(89,'[DUTY] мигратор не запускается без тестов','@О, как, а раньше работало)\n\nвозможно дубль:\nhttps://msg.o3.ru/ozon/pl/utxq5swz9bg5pdyxqbfiojfx4a\n\nпричина: configBuilder.Sources.Clear();\nПрогрев добавляется через вызов UsePlatform\nЧтобы работать с несколькими БД - используй вместо services.AddPostgresDbContext метод services.AddPostgresDbMultiple. Потом получай фабрику для конкретной БД по её имени через postgresConnectionFactoryProvider.GetConnectionFactory(\"ТРЕБУЕМОЕ ИМЯ\")'),(90,'[DUTY] как сохранить пароль для pg','https://msg.o3.ru/ozon/pl/ou18qqy4qt8ou8zh7brr7d4uwe\n\nупала джоба \"secret search\" из-за того что указан Password\nубрал Password из appsettings.Testing.json, но теперь падает джоба \"dotnet integration tests\"\n\nответ: пароль всегда хранить в vault\n'),(91,'[CONFLUENCE] vault','@vault\nhttps://confluence.ozon.ru/pages/viewpage.action?pageId=79959324'),(92,'[DOCS] версионирование сервисов','@версионирование\n\nhttp://devs-onboarding.prod.a.o3.ru/devs-onboarding/interservice/#%d0%b2%d0%b5%d1%80%d1%81%d0%b8%d0%be%d0%bd%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d1%81%d0%b5%d1%80%d0%b2%d0%b8%d1%81%d0%be%d0%b2'),(93,'[DOCS] стабилити','@stability\n\nhttps://grafana.o3.ru/d/WqK7QvHnk/new-service-stability?orgId=1&var-datasource=Stability&var-importance=All&var-direction=Platform-Infra&var-sub_direction=All&viewPanel=41\n\nhttps://confluence.ozon.ru/display/ONB/Stability'),(94,'[DUTY] как достучаться до сервиса через кб','@sd\n\nне может попасть в сервис через кб:\nhttps://msg.o3.ru/ozon/pl/ab5kkd1j8bdobgu8it4bmr5ndo\n\nмагия Володи, смотри тред)\n\nЕсли не указывается заголовок меш версии - то платформа будет балансить на ноды, которые имеют IsDefaultRoute=true'),(95,'[DUTY] here на обновление пайплайна с коверлетом','@here @coverlet\n\nhttps://msg.o3.ru/ozon/pl/y61rjkue7jfs3bwn48z5xebsyo\n\nсрач в каментах =) выкатили новый пайплайн\n\nподсчет code coverage:\n<ItemGroup>\n    <!-- Minimum version 16.5.0 -->\n    <PackageReference Include=\"Microsoft.NET.Test.Sdk\" Version=\"16.5.0\" />\n    <PackageReference Include=\"coverlet.collector\" Version=\"3.1.2\">\n      <PrivateAssets>all</PrivateAssets>\n      <IncludeAssets>runtime; build; native; contentfiles; analyzers; buildtransitive</IncludeAssets>\n    </PackageReference>\n  </ItemGroup>'),(96,'[DUTY] тесты лагов на кафку','@kafka\nобсуждение возможности тестов на лаг 0\n\nhttps://msg.o3.ru/ozon/pl/39zzx5pw5jfebgoahqb9emqerr\n\nEnablePartitionEOF пробовал?\nЭто настройка на консюмере, которая делает так, что Consume сразу вернет пустой результат в случае 0 лага\nВместо того, чтобы висеть и блокировать поток\n\nConsumeResult.IsPartitionEOF == true должно быть в таком случае'),(97,'[DUTY] поднять базу для интеграционных тестов','https://msg.o3.ru/ozon/pl/9jjtbh1wmiguuyqqg4qnukc8wh\n\nВ тестах когда задаёте UsePlatformData и внутри него config.Vault.Project - просто укажите путь не до основного приложения,  а заведите рядом папку для тестов и в них определите.\n\nподнять базу для тестов:\ndotnet integration tests:\n  services:\n    - alias: \'postgres\'\n      name: \'postgres:latest\'\n  variables:\n    # postgres\n    POSTGRES_DB: \'postgres\'\n    POSTGRES_USER: \'postgres\'\n    POSTGRES_PASSWORD: \'postgres\''),(98,'[DUTY] миграции падают на джобе merge to master','migrate --dryrun\n\nуспешные на всех env --dryrun миграции на pg падают на мерже в мастер\n\nhttps://msg.o3.ru/ozon/pl/5c3rkgmrd78buc33sghdghe61c\n\nSystem.ArgumentOutOfRangeException: Objects can\'t be empty (Parameter \'objects\')\n\nответ: Исключение косячное - перевожу на русский язык. На прогреве от warden не удалось получить master реплику\n\nбд на dev окружении в warden никак не попадают. Поэтому для dev нужно отключать клиентскую балансировку\n\nпример регистрации с базой на dev:\nhttps://gitlab.ozon.ru/platform/dotnet/demo-services/-/blob/master/src/Ozon.Platform.DemoServices/Startup.cs#L75'),(99,'[DUTY] ищем ошибки на 5й версии grpc.tools','@grpctools5\n\nhttps://msg.o3.ru/ozon/pl/xaefxbtnjtdamr39i4bkjsy1ma\n\nрешение:\nСделай пож вот так:\nВ csproj с tools.grpc добавь такую секцию\n\n<PropertyGroup>\n    <mProto_LogImportance>high</mProto_LogImportance>\n</PropertyGroup>\nи прожми пож\n\ndotnet build -v d > compile_err.log\n\nа в логе:\nvendor: proto lookup: unknown revision release/mega-sort'),(100,'[DUTY] спаны в заголовках grpc','https://msg.o3.ru/ozon/pl/gzn1ysd5f7gfxc8yoymhma8dzc\n\n.net плафторма не  пишет в спаны заголовки grpc'),(101,'[DUTY] npgsql раскривулина кривожопая и odyssey','кто отвечает за csharp? npgsql раскривулина кривожопая падает на sasl + odyssey\n\nhttps://msg.o3.ru/ozon/pl/6hbxkwz8ebggxy5kriqx1krg7r'),(102,'[DUTY] обсуждение будущего пайплайна для миграций','https://msg.o3.ru/ozon/pl/6rwtu8x9h3br9yizzud1xaoejr'),(103,'[GITLAB] варианты создания релизного тега','@gitlab release tag\n\n1. С помощью script:\nrelease tag manual create job:\n  # image: registry.gitlab.com/gitlab-org/release-cli:latest\n  image: gitlab-registry.ozon.ru/docker/external-images/gitlab-org/release-cli:v0.11.0\n  stage: \'publish\'\n#  when: manual\n  rules:\n    - if: \'$CI_COMMIT_BRANCH =~ /^release\\/[a-z0-9-\\.]+$/ && $PACKAGES_VERSION\'\n      when: manual\n    - when: never\n#  needs: []\n  needs:\n    - dotnet build\n  allow_failure: true\n  script:\n    - export PKG_REL_DESCRIPTION=\"${CI_COMMIT_TITLE} Author - <a href=\"https://gitlab.ozon.ru/${GITLAB_USER_LOGIN}\">${GITLAB_USER_NAME}</a>\"\n    - echo \"RUNNING TEST RELEASE CREATE JOB\"\n    - release-cli create --name \"Release $PACKAGES_VERSION\" --description \"$PKG_REL_DESCRIPTION\" --tag-name \"second-$PACKAGES_VERSION\"\n\n2. С помощью ключевых слов:\nrelease tag auto create job:\n  image: gitlab-registry.ozon.ru/docker/external-images/gitlab-org/release-cli:v0.11.0\n  stage: \'publish\'\n  rules:\n    - if: \'$CI_COMMIT_BRANCH =~ /^release\\/[a-z0-9-\\.]+$/ && $PACKAGES_VERSION\'\n      when: always\n    - when: never\n  needs: \n    - dotnet build\n  allow_failure: true\n  script:\n    - echo \"RUNNING TEST RELEASE CREATE JOB\"\n  release:\n    tag_name: $PACKAGES_VERSION\n    name: \'Release $PACKAGES_VERSION\'\n    description: |\n      * ${CI_COMMIT_TITLE}\n      * Author - <a href=\"https://gitlab.ozon.ru/${GITLAB_USER_LOGIN}\">${GITLAB_USER_NAME}</a>'),(104,'[DUTY] падает миграция pg','@System.ArgumentOutOfRangeException: Objects can\'t be empty (Parameter \'objects\') \n\nhttps://msg.o3.ru/ozon/pl/uowrmne1dfgp5rdmt81z45n78c\n\nпадает джоба:\nhttps://gitlab.ozon.ru/wms/csharp/service/storage/-/jobs/74520144\n\nответ:\nОбычно такая ошибка если на получении от warden списка реплик не найдено master\nВыше в логе есть отметки вида Missing master replica in configuration \nЭто из-за того что [Service discovery] Got 0 endpoints for db ...\nБД не настроена?'),(105,'[DUTY] Grpc.AspNetCore и магия','@Grpc.AspNetCore\n\n1. тредик:\nhttps://msg.o3.ru/ozon/pl/mgxbzp7uhpfr8e9p958w5qaddo\n\nrpc.Core.RpcException: Status(StatusCode=\"Unavailable\", Detail=\"Error connecting to subchannel.\", DebugException=\"System.Net.Sockets.SocketException (0xFFFDFFFF): Name or service not known\n\nответ:\nОткатите пакеты до версий:\n<PackageVersion Include=\"Grpc.AspNetCore\" Version=\"2.43.0\" />\n<PackageVersion Include=\"Grpc.AspNetCore.Server.Reflection\" Version=\"2.43.0\" />\n\nhttps://jit.ozon.ru/browse/DOTNET-987'),(106,'[REDIS] костыль на endpoints','настройка endpoints редиса\n\nкостыль на редис:\n\n        var param = _configuration\n            .GetSection(nameof(RedisCacheOptions))\n            .GetSection(nameof(Configuration))\n            .Value;\n\n        services.PostConfigure<RedisCacheOptions>(o =>\n        {\n            o.ConfigurationOptions?.EndPoints.Add(param);\n        });\n        services.AddPlatformRedisCache();\n        '),(107,'[BASH] мастер класс от Клячина','вырезать слово:\n✗ a=\'dotnet_build_task\'\n✗ echo ${a/dotnet_/}\nbuild_task\n\nhttps://unix.stackexchange.com/questions/196239/convert-underscore-to-pascalcase-ie-uppercamelcase/196291#196291\n\nuscore=\"this_is_the_string_to_be_converted\"\narr=(${uscore//_/ })\nprintf %s \"${arr[@]^}\"\nThisIsTheStringToBeConverted\n\nэто вместо:\ntext=${cmd,,}\n    cc=\"\"\n    regex=\'([a-z]+)\'\n    while [[ $text =~ $regex ]]\n    do\n        word=${BASH_REMATCH[1]}\n        text=${text/$word/ }\n    cc=$cc${word^}\n    done\n'),(108,'[BASH] обрезать строку',' s=\"start_string_end\"\n var1=${s%string*} #Оставить s до первого вхождения string\n var2=${s#*string} #Оставить s после первого вхождения string'),(109,'[DUTY] s2s','нашли типа багу:\nhttps://msg.o3.ru/ozon/pl/jxuneew85pbitfqjozsja91ydy\n\nпро проброс заголовков:\nhttps://msg.o3.ru/ozon/pl/6quo1s8cytdudeci559baujk8e\n\nхотфикс:\nhttps://msg.o3.ru/ozon/pl/1xjud45p67gzuffw5qmhaxqsbh\n\nПодскажите, плиз, в 6.3 и выше такой проблемы нет? \nОтвет: нет\n'),(110,'[DUTY] No entrypoint project found!','https://msg.o3.ru/ozon/pl/5oests14jbn59r66bq9msp6jke\n\nERROR: No entrypoint project found!\n\nУкажи переменную DOTNET_ENTRYPOINT_PROJECT\nЕсли у тебя больше одного проекта в папке src\n\nЕсли код лежит не в папке src, то нужно еще указать переменную DOTNET_ENTRYPOINT_FOLDER'),(111,'[DUTY] неподдерживаемые зависимости','https://msg.o3.ru/ozon/pl/sno6uoaootnpdka3r3qz7uqubo\n\nSystem.ArgumentException\nDid not find a best constructor for Grpc.Core.ChannelBase\nDid not find a best constructor for Grpc.Core.ChannelClient\n\nответ:\n<PackageReference Include=\"Grpc.Core\" Version=\"2.44.0\" />\nПлатформа не поддерживает эту версию. Попробуйте 2.41.0\n\nа я думал на Grpc.AspNetCoreили на моки..'),(112,'[DUTY] логирование в ETCD','https://msg.o3.ru/ozon/pl/hi8zsuh7kjn5zrs3tsai9uz8pw\n\n=)\n\nhttps://jit.ozon.ru/browse/DOTNET-1094\n6.4'),(113,'[DUTY] уровень логирования для LE','уровень логирования для LE\n\nжалуются, что много логов:\nhttps://msg.o3.ru/ozon/pl/9xdknrx38ifm5q1c9n9ixm1mkw\n\nЧтобы их в грейлоге убрать, можно фильтр написать\nservice: \"ca-hold\" AND NOT SourceContext: \"Ozon.Platform.Data.LeaderElection.LeaderElectionProvider\"\n\nЧтобы вообще их сервис не скидывал можно фильтр в серилоге добавить, но потом сложно диагностировать будет\nhttps://nblumhardt.com/2017/01/serilog-filtering-dsl/'),(114,'[HOTFIX] hotfix LE 6.4.2','https://msg.o3.ru/ozon/pl/id8xyo544t8mz8ko4sjpwxjmmy\n\nФикс [DOTNET-1181] теперь использует корректный набор сертификатов для работы с Leader Election.'),(115,'[OZON] новый маттермост','https://msg.o3.ru/ozon/pl/w4hgetkhb789fpktz4twapitfr\n\nhttps://play.google.com/store/apps/details?id=ru.ozon.chatzone\n\nhttps://appstorage.o3.ru/artifact/android%2Fmattermost-mobile%2Fv1.51.1-o3%2F1f20e6d2%2FChatzone.apk\n'),(116,'[DUTY] кривые зависимости - отвалился mssql','@транзитивные зависимости mssql\n\nhttps://msg.o3.ru/ozon/pl/o73sjbyqdibtjq5ptbtxuo1pgh\n\nэксепшн:\nSystem.MissingMethodException: Method not found: \'Void Ozon.Platform.Data.Abstractions.IConnectionFactory`1.EnsureInitialized()\'. at Ozon.Platform.Data.MsSql.DynamicConnectionFactoriesBuilder.CreateDynamicFactory(Type factoryInterfaceType)\n   at Ozon.Platform.Data.MsSql.MsSqlFactoryExtensions.<>c__DisplayClass3_0.\n\nрешение: проверить зависимости)\n\n'),(117,'[HABR] статьи с хабра','@MsBuild:\nhttps://habr.com/ru/post/414969/\n\n@Asp.Net Core:\nhttps://habr.com/ru/post/677622/\nhttps://habr.com/ru/post/559888/\nhttps://habr.com/ru/post/559970/'),(118,'[DUTY]  grpc модификаторы доступа','https://msg.o3.ru/ozon/pl/ygnjz9hjkibxzqp47u4sb4e5ac\n\nтикет по модификаторам:\nhttps://jit.ozon.ru/browse/DOTNET-1211'),(119,'[DUTY] RELATIME_CONFIG_PROJECT / VERSION','https://msg.o3.ru/ozon/pl/nobxowdkg3y4zm4ndnsmxbi1he\n\nНужны две переменные\nRELATIME_CONFIG_PROJECT - ид проекта в gitlab\nRELATIME_CONFIG_VERSION - нормализованный git branch\n\nDEPLOY_CONFIG: yes'),(120,'[OZON] отпуска в ноябре','https://msg.o3.ru/ozon/pl/wkpfprs6uifjdks1ciqa37fdao\n\nс сентября по декабрь - hi season.\nпик - ноябрь. просьба не брать отпуска.\nвысокая ответственность, высокая нагрузка.'),(121,'[TOOLING] команды','dotnet tool install Ozon.Platform.DependencyInspector --version 1.1.0.81-dotnet-1101\ndotnet tool uninstall Ozon.Platform.DependencyInspector\ndotnet tool update Ozon.Platform.Tools --version 500.0.2\ndotnet platform --version\n\n1. издать и установить локально:\n<PackAsTool>true</PackAsTool>\n        <ToolCommandName>platform</ToolCommandName>\n        <GeneratePackageOnBuild>true</GeneratePackageOnBuild>\n\n<OutputPath>\nC:\\Users\\nikomedvedev\\.nuget\\local_packages\\ozon.platform.tools.realtimeconfig\n</OutputPath>\n<Version>500.0.0</Version>\n\nNuGet Sources должен быть Local: C:\\Users\\nikomedvedev\\.nuget\\local_packages\nтуда и издастся\n\n2. ПОКА ПОЛУЧИЛОСЬ ТОЛЬКО ВСЮ ТУЛУ\n3. NuGet кэширует, поэтому при каждом изменении надо \nвыпускать новую версию - иначе будешь юзать одну и ту же.'),(122,'[CMD] очистка nuget кэша','dotnet nuget locals all --clear'),(123,'[DUTY] Grpc.AspNetCore и странный баг','https://msg.o3.ru/ozon/pl/qfco7tk17tri5b9uzmu1dz3z9c\n\nGrpc.Core.RpcException: Status(StatusCode=\"Unavailable\", Detail=\"Error connecting to subchannel.\", DebugException=\"System.Net.Sockets.SocketException (0xFFFDFFFF): Name or service not known\n\nне обновлять Grpc.AspNetCore выше 2.43.0'),(124,'[DUTY] новый warmup - отвалился одиссей','https://msg.o3.ru/ozon/pl/9yftjcg83ir1p8hg49i8m6u6oc\n\nSeverity: FATAL\n    SqlState: 08006\n    MessageText: odyssey: cedf0d02db2ff: failed to connect to remote server s92571a5c6cad\n\nЗаместо названия базы в строку подключения начал прокидыватся cluster name \n\nВсе есть - читайте документацию:\nhttps://gitlab.ozon.ru/platform/dotnet/platform/-/blob/master/docs/breaking-changes.md'),(125,'[DUTY] кафка и транзитивные зависимости','https://msg.o3.ru/ozon/pl/k4wagtcjsfdyuegxd7ykgw3mwo\n\nподключил Ozon.Platform.Data.Kafka 6.4.3.3782\nполучил:\nSystem.TypeLoadException: Method \'get_HeadersState\' in type \'Ozon.Platform.HeadersForwarding.Headers.PlatformHeadersAccessor\' from assembly \'Ozon.Platform.HeadersForwarding, Version=6.3.0.3233, Culture=neutral, PublicKeyToken=null\' does not have an implementation.\n   at Microsoft.Extensions.DependencyInjection.PlatformServiceExtensions.AddPlatformHeadersForwarding(IServiceCollection services)\n   at Microsoft.Extensions.Hosting.PlatformExtensions.<>c__DisplayClass2_0.<UsePlatform>b__1(HostBuilderContext context, IServiceCollection services)\n   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()\n   at Microsoft.Extensions.Hosting.HostBuilder.Build()\n   at Ozon.Pvz.Api.Inbound.Program.Main(String[] args) in C:\\code\\inbound\\src\\Ozon.Pvz.Api.Inbound\\Program.cs:line 17\n\nРешение:\nСкорее всего транзитивно старые версии платформы подтянулись \n\'Ozon.Platform.HeadersForwarding, Version=6.3.0.3233'),(126,'[DUTY] REALTIME_CONFIG_PROJECT','https://msg.o3.ru/ozon/pl/fmgzi5ywwpbg5ekpa5qiim4s6h\n\nне находит переменную окружения REALTIME_CONFIG_PROJECT, куда ее добавить?\n\nВам ETCD нужен в тестах?\n\nЕсли нет - то отключите его, так как сейчас он пытается запуститься в рамках вашего тестового хоста.\noptions.Etcd.Mode = EtcdMode.Disabled'),(127,'[GRPC] токен на prod','Аппрувит Ян по номеру заявки: #65 | FF#0 | \n(65 это номер заявки)\n\nЧерез BllomRPC metadata с авторизацией выглядит так:\n{\n     \"x-o3-s2s\":\"Bearer ...\"\n}\n\nТокен - access token из http://s2s-control-plane.prod.a.o3.ru/prod'),(128,'[GITLAB] таймаут на тесты','https://msg.o3.ru/ozon/pl/kpospnf9bbgbbbnw7u6ujaszyc\n\n<?xml version=\'1.0\' encoding=\'utf-8\' ?>\n<RunSettings>\n  <RunConfiguration>\n    <TestSessionTimeout>$DOTNET_UNIT_TEST_SESSION_TIMEOUT</TestSessionTimeout>\n  </RunConfiguration>\n  <DataCollectionRunSettings>\n    <DataCollectors>\n      <DataCollector friendlyName=\'XPlat Code Coverage\'>\n'),(129,'[DUTY] System.Runtime 6.0.0.0 VS и RTC','https://msg.o3.ru/ozon/pl/41srhw1nkbdodcpfxoungk97sr\n\nRTC 6.2.3.x\nVisual Studio\nFailed to resolve assembly: \'System.Runtime, Version=6.0.0.0\n\n1. Решение - настройка студии с помощью решарпера:\nhttps://msg.o3.ru/ozon/pl/zphhaz1333rnuknzqg6fgikp5y\n\nОтметить Use ReSharper Build\nUse MsBuildVersion: выбрать dotnet sdk в ReSharper\n\n2. https://msg.o3.ru/ozon/pl/4fps9e44sjg73ykf5kiahz8fey\nПосле платформы 6.3.0 RTC едет не транзитивно, а отдельно'),(130,'[DUTY] перезапись дефолтных RTC конфигов','https://msg.o3.ru/ozon/pl/g19e85ao7prcpkw819c1ci8hqe\n\nпро перезапись дефолтных конфигов'),(131,'[OVERLOAD] фильтрация overload','https://msg.o3.ru/ozon/pl/5w3iqjpsz7gh9dwbfrrwaqgzbr'),(132,'[DUTY] пропала sql метрика','пропала метрика ozon_mssql_query_duration_seconds\n\nhttps://msg.o3.ru/ozon/pl/7m1yfhc1i78b9ku4k7y7dsq7ne\n\nhttps://github.com/dotnet/SqlClient/blob/main/porting-cheat-sheet.md\n\nhttps://msg.o3.ru/ozon/pl/hj8r1j5i53bcbkshfyihi3wjkc\n\nSystem.Data.SqlClient убрана из поддержки'),(133,'[RTC] ERROR - Error run command: [\'updater\'','https://msg.o3.ru/ozon/pl/dmjkcrwu1if6jfsi7peyo17jdr\n\nЯ подключил к сервису realtime config и при деплое получаю в job \n2022/08/23 13:14:03 Source version for merge not found, creating config from yaml files only...\n\nUpdater failed\n2022-08-23 13:14:03,462 - ERROR - Error run command: [\'updater\', \'-client-cert=/certs/etcd_client.pem\', \'-client-key=/certs/etcd_client.key\', \'-ca-cert=/certs/etcd_ca.pem\', \'-endpoints=etcdcommon1-stg.s.o3.ru:2379,etcdcommon2-stg.s.o3.ru:2379,etcdcommon3-stg.s.o3.ru:2379\', \'-project=25851\', \'-version=release-2022w33-etcd\', \'-f\', \'./.o3/k8s//values.yaml\', \'-f\', \'./.o3/k8s//values_staging.yaml\', \'-from-version-auto\']\n\nОтвет: В values.yaml не хватает секции для realtime'),(134,'[DUTY] добавление s2s_auth_requests_sign_http','https://msg.o3.ru/ozon/pl/3bdespgsjfyn5q7bjafpbp1ohe\n\nПривет, подскажите, пожалуйста, добавление флагов s2s_auth_requests_sign_http и s2s_auth_requests_verify_http через вас делается?\n\nОтвет: Они добавляются в рамках пайплайна, насколько я помню\nВ джобах аля s2s auth staging и прочих.\n\nеще:\nhttps://msg.o3.ru/ozon/pl/uudahsnb13rn7qzkfjkrt8kmpc'),(135,'[DUTY] обрезался хвост названия','https://msg.o3.ru/ozon/pl/o5zooqjn9fgw8fk7tjnumzer1e\n\nупала джоба migrate-dev:dry-run\n\nпосмотреть конфиги кубера:\nkubectl -nwms get pods | grep wms-svc-megasort-route-updater\n\nиз appsettings:\n\"MasterHost\": \"wms-svc-megasort-route-updater-develop-infra-postgresql-db.wms.svc.dev.k8s.o3.ru:5432\"'),(136,'[DUTY] сайдкар','@sidecar\n\nhttps://msg.o3.ru/ozon/pl/dzfxdepukpg6benbcuh3mnzr9y\n\nвопрос по правам\n\nОтвет: на прод надо отдельно права на кубер просить, как именно - я хз, у самого тоже прав нету.'),(137,'[DUTY] s2s токен для оверлоада','https://msg.o3.ru/ozon/pl/pnf63eo7g7gq5kqkf8jkdp4yjh\n\nUnable to acquire token to access service \'dispatcher\''),(138,'[DUTY] s2s токен - моё','https://msg.o3.ru/ozon/pl/oc158nbx8jyppciwbnf7c76h8a\n\nбомба)'),(139,'[OVERLOAD] overload и токен на dispatcher','1. https://msg.o3.ru/ozon/pl/pmf3ysknajndmg49mzqq8fiywy\n\nWarming up stopped with error\n ---> System.ApplicationException: Unable to acquire token to access service \'dispatcher\'\n\nпока хз\n\nнадо чтобы в kct был просто yaml с твоим сервисом. тогда он автоматом попадает в разрешенные к dispatcher\n\nhttps://gitlab.ozon.ru/platform/kct/-/merge_requests/1686\n\n\n2. еще тред по джобе миграции:\nUnable to acquire token to access service \'dispatcher\'\nhttps://msg.o3.ru/ozon/pl/xfsh7h1zmpnobx74np4wkj84qa\n\nРекомендуют: проверьте, что SERVICE_NAME джобы миграции корректный и MR для прав доступа\n\nПривет. service_name берется из ITC и пишется в логах джобы:\n$ o3-re jobs get-deploy-variables \nRun variables\nK8S_NAMESPACE - from ITC: \'pvz\' from values: \'pvz\'\nSERVICE_NAME - from ITC: \'pvz-api-user\' from values: \'pvz-api-user\''),(140,'[DUTY] 25.08.22 - нормалёк','мои отличники:\n\nPG: https://msg.o3.ru/ozon/pl/dbrzs6ssytykujciu93r84r4qh\n\nLE: https://msg.o3.ru/ozon/pl/rnqhrm1qdtriprzphiugdfxbta\n\nETCD, Aleksey Zotkin - гандон: azotkin@ozon.ru\nhttps://msg.o3.ru/ozon/pl/f9u7ermt7j8cpk8ned65fxoipc\n\nПОМОГ:\nStanislav Bulovsky:\nhttps://msg.o3.ru/ozon/pl/zozieupiptdt8g47fuiu9c9ymw\nhttps://msg.o3.ru/ozon/pl/z56w9iy19i86xg9ygh315m378c\n\nСВАГГЕР:\nhttps://msg.o3.ru/ozon/pl/nzs4bpn883f63m8kwup7ro1zyo\n\nБАГА НА ТУЛУ (arm64):\nhttps://msg.o3.ru/ozon/pl/e65mgcj5njfs3qiccoqss869ca'),(141,'[MESH] доступ на stg к другой ветке','@meshversion \n\nhttps://msg.o3.ru/ozon/pl/c4nyynuz6pykzrsenrbkspwgty\nhttps://msg.o3.ru/ozon/pl/onexty6h6irq3nfuf5a3bepdgo\n\nя могу как-то на СТГ через балансировку обратиться к релизной ветке? \n\nМожно через mesh-version\nНужно в хедеры (metadata) добавить значение которое тут сгенеришь\nhttps://itc.o3.ru/tools/mesh\nСам хедер называется X-O3-MeshVersion'),(142,'[DUTY] доки и rtc','https://msg.o3.ru/ozon/pl/zxa6s3p8dtfcikf6ip8qcobyoo\n\nмак версии тулы\nделаем по инструкции)'),(143,'[.NET] пример добавления токена','https://msg.o3.ru/ozon/pl/d3x1igpbpifb7d6o9dagbfjynh\n\nклассный код от Володи Тырина'),(144,'[DUTY] канарейка упала на pg','@PostgresException \nhttps://msg.o3.ru/ozon/pl/tn4dq354r3b3jd6b54mwbfiikr\n\n\"exception\":\"Npgsql.PostgresException (0x80004005): 53300: remaining connection slots are reserved for non-replication superuser connections\\n   at Npgsql.Internal.NpgsqlConnector\n\nпул коннектов закончился\n\nВключите использование pgbouncer\'а (это порт 6432 вместо 5432 в настройках коннекта), должно полегчать'),(145,'[DUTY] No \'REALTIME_CONFIG_PROJECT\'','https://msg.o3.ru/ozon/pl/afjpfzbrt7y6pmfhjbd3bdoqca\n\nНужна переменная окружения такая\nЕсли вы пользуетесь ETCD, то нужно сказать ему id вашего проекта, который будет лежать в этой переменной\n\nПроверьте, что DEPLOY_CONFIG: yes указано\n\nв шаблонах этого нет'),(146,'[DUTY] Arm64 not supported','https://msg.o3.ru/ozon/pl/rgc5oea9a7gftp97su99fhjdza\n\nстарая тула (до 7.0.3) не запускается на маке arm64\nProcess architecture Arm64 not supported\nв треде есть WA'),(147,'[KCT] коммит неавторизованного пользователя','https://msg.o3.ru/ozon/pl/ku5fz3ckmfg79jswj1ssyi58ko\n\nМАГИЯ)\n@kct'),(148,'[DUTY] cron job','https://msg.o3.ru/ozon/pl/rzdenbr66i85bqbw6kc7stetkr\n\nвопрос по крон джобе\n@cron jobs\n\nКрон не отдается варденом.\n\nХодить в себя не запрещено. Но не могу сказать насколько это нормально для вас.\n\nСбор логов должен осуществляться как обычно.\n\nОтправка метрик пока без приритета https://jit.ozon.ru/browse/DOTNET-1093'),(149,'[DUTY] вопрос по rtc','https://msg.o3.ru/ozon/pl/ie58kh58affy98y13s3dkhiiso\n\nIOptionsSnapshot регистрируется как Scoped сервис и перезачитвает настройки в каждом новом скоупе\n\nЕсли у тебя синглтон, то нужно использовать IOptionsMonitor\n\nЕсли у тебя scoped сервис, то, возможно, баг. Вот тут ребята жаловались - https://jit.ozon.ru/browse/DOTNET-1299'),(150,'[DUTY] кривое наследование в rct','https://msg.o3.ru/ozon/pl/w1i5royufbb43c6eow8mkbxi1y\n\nТочно работающий способ - сделать свойства в базовом классе виртуальными\nhttps://gitlab.ozon.ru/tpl/library/lms-kafka-and-workers/-/blob/master/src/Ozon.Logistics.Workers/Options/WorkerOptionsBase.cs#L13\n\nА потом их переопределять там, где они нужны в реалтайм конфиге и вешать атрибут\nhttps://gitlab.ozon.ru/tpl/api/tariff/-/blob/master/src/Ozon.TPL.Tariff/Options/Cache/LocationCacheOptions.cs#L18'),(151,'[DUTY] client side balancing и pg','https://msg.o3.ru/ozon/pl/cn3yzxzkc7fj3jjt8m7mujn5py\n\nFORCE_CLIENT_SIDE_BALANCING не принудительно включает балансировку, а включает проверку, что балансировка включена, тут он не поможет\n\nТут, судя по тому, что UseClientSideBalancing  = false, мы уходим в ветку \"локальной\" настройки постгреса \n\nПредположение в том, что в запущенный джоб не пробрасывается переменная ASPNETCORE_ENVIRONMENT '),(152,'[PROTO] repeated поля','https://msg.o3.ru/ozon/pl/1qd186a3efd9mf3ogdc5y1xipe\n\nRepeatedField всегда генерятся без сеттера, инициализируются как пустая коллекция, а в обработчике в них добавляются элементы\nТипа так\nhttps://gitlab.ozon.ru/tpl/api/tariff/-/blob/master/src/Ozon.TPL.Tariff/RequestHandlers/Main/GetWarehousesProvidersHandler.cs#L36'),(153,'[DUTY] ошибка в заголовках авторизации','https://msg.o3.ru/ozon/pl/f9s74zh1wiyexmw4kmbhgw671e\n\nв графане запросы от alps-documets отображаются как alps-api, alps-documents и отваливаются с ошибкой валидации токена.\n\nПодсказка: Собственно вам нужно не пробрасывать заголовки x-o3*, поскольку для них проброс уже есть в платформе: определенные заголовки (вроде сейчас x-o3-app-name, x-o3-app-version, x-o3-s2s) не пробрасываются никогда, а остальные пробросятся сами.'),(154,'[DUTY] кубер и докер раннеры','https://msg.o3.ru/ozon/pl/a654dsbfy7bm8jf91767j5n6qh\n\ndotnet integration tests:\n  tags: [docker,  docker-shared-runner]\n\n  tags: [tests, k8s]\n\nТ.е. для кубер раннеров:\ndotnet integration tests:\n  tags: [tests, k8s]\n  extends: \'.bootstrap\'\n  services:\n    - name: docker-hub.artifactory.s.o3.ru/postgis/postgis\n      alias: postgis-tests\n  variables:\n    # postgres\n    POSTGRES_DB: \'lssrt-migeo-lozon-sync-test\'\n\n'),(155,'[DB] миграции oh my pg tool','@oh-my-pg-tool\nhttps://msg.o3.ru/ozon/pl/w65s8ogtijyz3yb4hohm7otc9e\n\nпайплайн с миграциями:\nhttps://gitlab.ozon.ru/dotnet/ci/common/-/tree/1.0#%D0%BE%D0%B1%D1%89%D0%B5%D0%B5-%D0%BE%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5\n\nинструкция:\nhttps://gitlab.ozon.ru/dotnet/ci/common/-/blob/1.0/docs/migrations.md\n\n..Таким образом - вы вполне можете включить себе старые миграции migrate:ENV, если выставите у себя флаг SCHEMA_MIGRATION. Однако, если вы не добавите необходимые настройки для oh-my-pg-tool, то у вас будет запускаться одна и та же логика сервисных миграций два раза.\n'),(156,'[DUTY] падает крон на prod','https://msg.o3.ru/ozon/pl/ub1jmugompb4ie9q9bab5m13cc\n\nВнтури контейнера по адресу /var/run/secrets/kubernetes.io/serviceaccount/token должен быть jwt токен'),(157,'[DUTY] вопрос про метрики','@метрики threads count\n\nhttps://msg.o3.ru/ozon/pl/bitn4r7e1jdtimjgnqd4dskare\n\nразвернутый ответ от Леши'),(158,'[DUTY] виртуальный сервис','https://msg.o3.ru/ozon/pl/cthr1sqmobyojqu7kezhzwjsor\n\nвопрос - куда класть секреты в виртуальном сервисе'),(159,'[DUTY] общий вопрос по rtc и itc - kafka на prod','https://msg.o3.ru/ozon/pl/fyu7g1txc7bibbuohcnsnpgejr\n\nкак настроить адреса в этом файле, чтобы разделить PROD и STG среды?'),(160,'[DUTY] CORS 6.5.0','https://msg.o3.ru/ozon/pl/i84mp86fafntpqz9d7e3mwekpr\n\nотказ от прокси:\nhttps://confluence.ozon.ru/pages/viewpage.action?pageId=269278316\n\n6.5.0+ корс на 30-09-2022\nhttps://jit.ozon.ru/browse/DOTNET-1228'),(161,'[DUTY] vault и etcd локально','к сожалению, удалил..\n\nтут было про #if DEBUG'),(162,'[DUTY] таймаут тестов','https://msg.o3.ru/ozon/pl/r4gogxpripyaurgk3sp9p7xeyo\n\nDOTNET_INTEGRATION_TEST_SESSION_TIMEOUT \n\nтаймаут тестов на 0.0.5-dotnet-testing'),(163,'[DUTY] Ошибка в миграции odyssey','Ошибка в миграции odyssey\n\nMessageText: odyssey: c30cf3804770d: route for \'postgres.root\' is not found\n\nhttps://msg.o3.ru/ozon/pl/a516yu87ajyom8tka8yuyz7zma\n\nответ: не передаются название базы и имя пользователя. поэтому пытаетесь лезть в базу postgres под пользователем root'),(164,'[DUTY] версии миграций','https://msg.o3.ru/ozon/pl/ecs1ong9xpgfdyqf7gwyu13u4h\n\nКак разрулить версии миграций\n\nОтвет: использовать в качестве версии миграции timestamp'),(165,'[DUTY] задержка запроса','https://msg.o3.ru/ozon/pl/xw1icfy4ntnqxyo9w78k759smo\n\nЗадержка запроса на 700ms\nИнтересный разбор'),(166,'[DUTY] etcdcommontwo','https://msg.o3.ru/ozon/pl/pun364rsf7yamekiik679hy3mr\n\nдля etcd le могут выдать доступ к ETCDCOMMONTWO_ENDPOINTS\n\nWA:\nservices.AddLeaderElection(options => options.Endpoints = Environment.GetEnvironmentVariable(\"ETCDCOMMONTWO_ENDPOINTS\"));'),(167,'[DUTY] mssql таймаут','https://msg.o3.ru/ozon/pl/kftuxgzq7fgw5ceapu4qwhjexy\n\nтаймаут в минуту на mssql - таймаут ингресса'),(168,'[DUTY] миграции и гусь','https://msg.o3.ru/ozon/pl/a7x814s883fg5jt9xgxgtr45ae\n\nза гуся отвечают ~postgresql'),(169,'[DUTY] skip merge master','https://msg.o3.ru/ozon/pl/ctpxhr7zi7n95d7yozo5nb3u3c\n\nотменить мерж в мастер на пайплайне');
/*!40000 ALTER TABLE `Text` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `Users`
--

DROP TABLE IF EXISTS `Users`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `Users` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `Email` longtext,
  `Password` longtext,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `Users`
--

LOCK TABLES `Users` WRITE;
/*!40000 ALTER TABLE `Users` DISABLE KEYS */;
INSERT INTO `Users` VALUES (1,'1@2','12');
/*!40000 ALTER TABLE `Users` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2022-10-23 14:33:17
