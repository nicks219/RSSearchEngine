using RsseEngine.SearchType;

namespace Rsse.Tests.Common;

/// <summary>
/// Общие данные для тестов.
/// </summary>
public abstract class TestData
{
    /// <summary>
    /// Перечисление extended алгоритмов.
    /// </summary>
    public static readonly List<ExtendedSearchType> ExtendedSearchTypes =
    [
        ExtendedSearchType.Legacy,
        ExtendedSearchType.GinOffset,
        ExtendedSearchType.GinOffsetFilter,
        ExtendedSearchType.GinArrayDirectLs,
        ExtendedSearchType.GinArrayDirectFilterLs,
        ExtendedSearchType.GinArrayDirectBs,
        ExtendedSearchType.GinArrayDirectFilterBs,
        ExtendedSearchType.GinArrayDirectHs,
        ExtendedSearchType.GinArrayDirectFilterHs
    ];

    /// <summary>
    /// Перечисление reduced алгоритмов.
    /// </summary>
    public static readonly List<ReducedSearchType> ReducedSearchTypes =
    [
        ReducedSearchType.Legacy,
        ReducedSearchType.GinArrayDirect,
        ReducedSearchType.GinArrayMergeFilter,
        ReducedSearchType.GinArrayDirectFilterLs,
        ReducedSearchType.GinArrayDirectFilterBs,
        ReducedSearchType.GinArrayDirectFilterHs
    ];

    /// <summary>
    /// Метрики на запросы к дампу pg_backup_.txtnotes через api с использованием его логики ограничения размера ответа
    /// </summary>
    public static IEnumerable<object?[]> ComplianceApiTestData =>
    [
        ["чорт з ным зо сталом", """{"res":{"1":0.43478260869565216},"error":null}"""],
        ["чёрт с ними за столом", """{"res":{"1":52.631578947368425},"error":null}"""],
        ["с ними за столом чёрт", """{"res":{"1":4.2105263157894735},"error":null}"""],
        ["преключиться вдруг верный друг", """{"res":{"444":0.35714285714285715,"243":0.02},"error":null}"""],
        ["приключится вдруг верный друг", """{"res":{"444":35.08771929824562},"error":null}"""],
        ["пляшем на", """{"res":{"1":21.05263157894737},"error":null}"""],
        ["ты шла по палубе в молчаний", """{"res":{"10":5.154639175257731},"error":null}"""],
        ["оно шла по палубе в молчаний", """{"res":{"10":0.6818181818181818},"error":null}"""],
        ["123 456 иии", """{"res":null,"error":null}"""],
        ["aa bb cc dd .,/#", """{"res":null,"error":null}"""],
        [" |", """{"res":null,"error":null}"""]
    ];

    /// <summary>
    /// Метрики на запросы к дампу pg_backup_.txtnotes без использования api и без ограничения размера ответа
    /// </summary>
    public static IEnumerable<object?[]> ComplianceUnitTestData =>
    [
        ["чёрт с ними за столом", """{"1":52.631578947368425} {"1":0.5434782608695652,"294":0.05714285714285714,"827":0.043478260869565216,"72":0.0425531914893617,"908":0.041666666666666664,"488":0.04054054054054054,"614":0.04,"517":0.037037037037037035,"65":0.037037037037037035,"776":0.03658536585365854,"786":0.03614457831325302,"70":0.03614457831325302,"617":0.03529411764705882,"865":0.03488372093023256,"363":0.03409090909090909,"814":0.033707865168539325,"452":0.033707865168539325,"439":0.033707865168539325,"380":0.03333333333333333,"609":0.03225806451612903,"887":0.031914893617021274,"464":0.031578947368421054,"913":0.03125,"485":0.03125,"205":0.03125,"71":0.03125,"420":0.030612244897959183,"34":0.030612244897959183,"25":0.030534351145038167,"727":0.030303030303030304,"573":0.030303030303030304,"793":0.03,"146":0.0297029702970297,"540":0.029197080291970802,"378":0.029126213592233007,"238":0.028571428571428574,"740":0.02803738317757009,"704":0.02803738317757009,"241":0.02803738317757009,"489":0.027777777777777776,"257":0.027777777777777776,"201":0.027522935779816515,"749":0.02727272727272727,"433":0.02702702702702703,"396":0.02702702702702703,"357":0.02702702702702703,"166":0.02702702702702703,"437":0.026785714285714284,"413":0.02631578947368421,"309":0.02631578947368421,"468":0.026086956521739132,"459":0.025423728813559324,"333":0.025210084033613446,"762":0.025,"375":0.024793388429752067,"412":0.024390243902439025,"344":0.024390243902439025,"149":0.024390243902439025,"797":0.024193548387096774,"910":0.023809523809523808,"860":0.023809523809523808,"271":0.023809523809523808,"260":0.023809523809523808,"176":0.023809523809523808,"702":0.023622047244094488,"111":0.023622047244094488,"695":0.0234375,"831":0.023076923076923078,"735":0.022900763358778626,"556":0.022900763358778626,"475":0.022900763358778626,"430":0.022900763358778626,"162":0.022900763358778626,"17":0.022900763358778626,"766":0.022556390977443608,"553":0.022556390977443608,"759":0.022058823529411763,"665":0.022058823529411763,"11":0.021897810218978103,"431":0.021739130434782608,"914":0.02142857142857143,"729":0.02097902097902098,"258":0.020833333333333332,"152":0.020833333333333332,"691":0.020689655172413793,"852":0.02040816326530612,"529":0.02027027027027027,"894":0.02,"392":0.019867549668874173,"141":0.01948051948051948,"685":0.019230769230769232,"350":0.019230769230769232,"153":0.019230769230769232,"900":0.019138755980861243,"523":0.019108280254777073,"264":0.019108280254777073,"218":0.019108280254777073,"310":0.01904761904761905,"339":0.0189873417721519,"897":0.018633540372670808,"85":0.018633540372670808,"607":0.018404907975460124,"224":0.018404907975460124,"78":0.018404907975460124,"145":0.01829268292682927,"893":0.01807228915662651,"832":0.017857142857142856,"687":0.01775147928994083,"683":0.01775147928994083,"884":0.01744186046511628,"61":0.01675977653631285,"448":0.016483516483516484,"425":0.016483516483516484,"500":0.01639344262295082,"46":0.016304347826086956,"58":0.016216216216216217,"6":0.016216216216216217,"395":0.016129032258064516,"830":0.015463917525773196,"772":0.015384615384615385,"698":0.015384615384615385,"244":0.015384615384615385,"401":0.015306122448979591,"53":0.015228426395939085,"697":0.01507537688442211,"118":0.014925373134328358,"532":0.014778325123152709,"406":0.014778325123152709,"569":0.014563106796116504,"561":0.014492753623188404,"100":0.014492753623188404,"690":0.014354066985645932,"91":0.014150943396226415,"64":0.014084507042253521,"51":0.0136986301369863,"663":0.013513513513513514,"346":0.013215859030837006,"861":0.013100436681222707,"139":0.013043478260869566,"62":0.0125,"66":0.012396694214876033,"768":0.01171875,"60":0.011363636363636364,"330":0.011152416356877323,"79":0.010869565217391304,"50":0.010452961672473868,"82":0.008310249307479225}"""],
        ["с ними за столом чёрт", """{"1":4.2105263157894735} {"1":0.5434782608695652,"294":0.05714285714285714,"827":0.043478260869565216,"72":0.0425531914893617,"908":0.041666666666666664,"488":0.04054054054054054,"614":0.04,"517":0.037037037037037035,"65":0.037037037037037035,"776":0.03658536585365854,"786":0.03614457831325302,"70":0.03614457831325302,"617":0.03529411764705882,"865":0.03488372093023256,"363":0.03409090909090909,"814":0.033707865168539325,"452":0.033707865168539325,"439":0.033707865168539325,"380":0.03333333333333333,"609":0.03225806451612903,"887":0.031914893617021274,"464":0.031578947368421054,"913":0.03125,"485":0.03125,"205":0.03125,"71":0.03125,"420":0.030612244897959183,"34":0.030612244897959183,"25":0.030534351145038167,"727":0.030303030303030304,"573":0.030303030303030304,"793":0.03,"146":0.0297029702970297,"540":0.029197080291970802,"378":0.029126213592233007,"238":0.028571428571428574,"740":0.02803738317757009,"704":0.02803738317757009,"241":0.02803738317757009,"489":0.027777777777777776,"257":0.027777777777777776,"201":0.027522935779816515,"749":0.02727272727272727,"433":0.02702702702702703,"396":0.02702702702702703,"357":0.02702702702702703,"166":0.02702702702702703,"437":0.026785714285714284,"413":0.02631578947368421,"309":0.02631578947368421,"468":0.026086956521739132,"459":0.025423728813559324,"333":0.025210084033613446,"762":0.025,"375":0.024793388429752067,"412":0.024390243902439025,"344":0.024390243902439025,"149":0.024390243902439025,"797":0.024193548387096774,"910":0.023809523809523808,"860":0.023809523809523808,"271":0.023809523809523808,"260":0.023809523809523808,"176":0.023809523809523808,"702":0.023622047244094488,"111":0.023622047244094488,"695":0.0234375,"831":0.023076923076923078,"735":0.022900763358778626,"556":0.022900763358778626,"475":0.022900763358778626,"430":0.022900763358778626,"162":0.022900763358778626,"17":0.022900763358778626,"766":0.022556390977443608,"553":0.022556390977443608,"759":0.022058823529411763,"665":0.022058823529411763,"11":0.021897810218978103,"431":0.021739130434782608,"914":0.02142857142857143,"729":0.02097902097902098,"258":0.020833333333333332,"152":0.020833333333333332,"691":0.020689655172413793,"852":0.02040816326530612,"529":0.02027027027027027,"894":0.02,"392":0.019867549668874173,"141":0.01948051948051948,"685":0.019230769230769232,"350":0.019230769230769232,"153":0.019230769230769232,"900":0.019138755980861243,"523":0.019108280254777073,"264":0.019108280254777073,"218":0.019108280254777073,"310":0.01904761904761905,"339":0.0189873417721519,"897":0.018633540372670808,"85":0.018633540372670808,"607":0.018404907975460124,"224":0.018404907975460124,"78":0.018404907975460124,"145":0.01829268292682927,"893":0.01807228915662651,"832":0.017857142857142856,"687":0.01775147928994083,"683":0.01775147928994083,"884":0.01744186046511628,"61":0.01675977653631285,"448":0.016483516483516484,"425":0.016483516483516484,"500":0.01639344262295082,"46":0.016304347826086956,"58":0.016216216216216217,"6":0.016216216216216217,"395":0.016129032258064516,"830":0.015463917525773196,"772":0.015384615384615385,"698":0.015384615384615385,"244":0.015384615384615385,"401":0.015306122448979591,"53":0.015228426395939085,"697":0.01507537688442211,"118":0.014925373134328358,"532":0.014778325123152709,"406":0.014778325123152709,"569":0.014563106796116504,"561":0.014492753623188404,"100":0.014492753623188404,"690":0.014354066985645932,"91":0.014150943396226415,"64":0.014084507042253521,"51":0.0136986301369863,"663":0.013513513513513514,"346":0.013215859030837006,"861":0.013100436681222707,"139":0.013043478260869566,"62":0.0125,"66":0.012396694214876033,"768":0.01171875,"60":0.011363636363636364,"330":0.011152416356877323,"79":0.010869565217391304,"50":0.010452961672473868,"82":0.008310249307479225}"""],
        ["ты шла по палубе в молчаний", """{"10":5.154639175257731} {"10":0.6818181818181818,"606":0.058823529411764705,"794":0.05333333333333334,"781":0.05,"800":0.04597701149425287,"827":0.043478260869565216,"1":0.043478260869565216,"466":0.0425531914893617,"72":0.0425531914893617,"102":0.0392156862745098,"524":0.037383177570093455,"623":0.03508771929824561,"778":0.034482758620689655,"735":0.030534351145038167,"366":0.02962962962962963,"208":0.02962962962962963,"458":0.029411764705882353,"625":0.029197080291970802,"2":0.02877697841726619,"533":0.028368794326241134,"58":0.02702702702702703,"819":0.025974025974025976,"423":0.024390243902439025,"857":0.023255813953488372,"169":0.022727272727272728,"417":0.02185792349726776,"686":0.021164021164021163,"52":0.021164021164021163,"675":0.020100502512562814,"532":0.019704433497536946,"620":0.018867924528301886,"158":0.01809954751131222,"862":0.017857142857142856,"60":0.015151515151515152,"82":0.0110803324099723}"""],
        ["оно шла по палубе в молчаний", """{} {"10":0.6818181818181818,"606":0.058823529411764705,"794":0.05333333333333334,"781":0.05,"800":0.04597701149425287,"827":0.043478260869565216,"1":0.043478260869565216,"466":0.0425531914893617,"72":0.0425531914893617,"106":0.0392156862745098,"102":0.0392156862745098,"524":0.037383177570093455,"656":0.03636363636363636,"623":0.03508771929824561,"778":0.034482758620689655,"669":0.03418803418803419,"226":0.031007751937984496,"735":0.030534351145038167,"366":0.02962962962962963,"208":0.02962962962962963,"458":0.029411764705882353,"625":0.029197080291970802,"2":0.02877697841726619,"533":0.028368794326241134,"58":0.02702702702702703,"819":0.025974025974025976,"423":0.024390243902439025,"857":0.023255813953488372,"169":0.022727272727272728,"417":0.02185792349726776,"686":0.021164021164021163,"52":0.021164021164021163,"675":0.020100502512562814,"532":0.019704433497536946,"620":0.018867924528301886,"158":0.01809954751131222,"862":0.017857142857142856,"60":0.015151515151515152,"82":0.0110803324099723}"""],

        ["чорт з ным зо сталом", """{} {"1":0.43478260869565216,"294":0.04285714285714286,"363":0.03409090909090909,"827":0.03260869565217391,"72":0.031914893617021274,"913":0.03125,"205":0.0234375,"25":0.022900763358778626,"540":0.021897810218978103,"900":0.014354066985645932,"310":0.014285714285714287,"832":0.013392857142857142}"""],
        ["преключиться вдруг верный друг", """{} {"444":0.35714285714285715,"243":0.02}"""],
        ["приключится вдруг верный друг", """{"444":35.08771929824562} {"444":0.35714285714285715,"243":0.02}"""],
        ["пляшем на", """{"1":21.05263157894737} {"1":0.21739130434782608}"""],
        ["123 456 иии", "{} {}"],
        ["aa bb cc dd .,/#", "{} {}"],
        [" |", "{} {}"]
    ];

    /// <summary>
    /// Метрики на запросы к дампу pg_backup_.txtnotes без использования api и с ограничением размера ответа до 11 значений
    /// </summary>
    public static IEnumerable<object?[]> ComplianceUnitTestLimitedData =>
    [
        ["чёрт с ними за столом", """{"1":52.631578947368425} {"1":0.5434782608695652,"294":0.05714285714285714,"827":0.043478260869565216,"72":0.0425531914893617,"908":0.041666666666666664,"488":0.04054054054054054,"614":0.04,"517":0.037037037037037035,"65":0.037037037037037035,"776":0.03658536585365854,"786":0.03614457831325302}"""],
        ["с ними за столом чёрт", """{"1":4.2105263157894735} {"1":0.5434782608695652,"294":0.05714285714285714,"827":0.043478260869565216,"72":0.0425531914893617,"908":0.041666666666666664,"488":0.04054054054054054,"614":0.04,"517":0.037037037037037035,"65":0.037037037037037035,"776":0.03658536585365854,"786":0.03614457831325302}"""],
        ["ты шла по палубе в молчаний", """{"10":5.154639175257731} {"10":0.6818181818181818,"606":0.058823529411764705,"794":0.05333333333333334,"781":0.05,"800":0.04597701149425287,"827":0.043478260869565216,"1":0.043478260869565216,"466":0.0425531914893617,"72":0.0425531914893617,"102":0.0392156862745098,"524":0.037383177570093455}"""],
        ["оно шла по палубе в молчаний", """{} {"10":0.6818181818181818,"606":0.058823529411764705,"794":0.05333333333333334,"781":0.05,"800":0.04597701149425287,"827":0.043478260869565216,"1":0.043478260869565216,"466":0.0425531914893617,"72":0.0425531914893617,"106":0.0392156862745098,"102":0.0392156862745098}"""],

        ["чорт з ным зо сталом", """{} {"1":0.43478260869565216,"294":0.04285714285714286,"363":0.03409090909090909,"827":0.03260869565217391,"72":0.031914893617021274,"913":0.03125,"205":0.0234375,"25":0.022900763358778626,"540":0.021897810218978103,"900":0.014354066985645932,"310":0.014285714285714287}"""],
        ["преключиться вдруг верный друг", """{} {"444":0.35714285714285715,"243":0.02}"""],
        ["приключится вдруг верный друг", """{"444":35.08771929824562} {"444":0.35714285714285715,"243":0.02}"""],
        ["пляшем на", """{"1":21.05263157894737} {"1":0.21739130434782608}"""],
        ["123 456 иии", "{} {}"],
        ["aa bb cc dd .,/#", "{} {}"],
        [" |", "{} {}"]
    ];
}
